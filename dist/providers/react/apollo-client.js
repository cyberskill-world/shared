function r(r,e,n){if(e in r){Object.defineProperty(r,e,{value:n,enumerable:true,configurable:true,writable:true})}else{r[e]=n}return r}function e(e){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};var t=Object.keys(o);if(typeof Object.getOwnPropertySymbols==="function"){t=t.concat(Object.getOwnPropertySymbols(o).filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable}))}t.forEach(function(n){r(e,n,o[n])})}return e}function n(r,e){if(r==null)return{};var n=o(r,e);var t,i;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);for(i=0;i<l.length;i++){t=l[i];if(e.indexOf(t)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(r,t))continue;n[t]=r[t]}}return n}function o(r,e){if(r==null)return{};var n={};var o=Object.keys(r);var t,i;for(i=0;i<o.length;i++){t=o[i];if(e.indexOf(t)>=0)continue;n[t]=r[t]}return n}import{ApolloClient as t,ApolloProvider as i,ApolloLink as l,HttpLink as a,InMemoryCache as c,split as s}from"@apollo/client";import{onError as u}from"@apollo/client/link/error";import{GraphQLWsLink as p}from"@apollo/client/link/subscriptions";import{getMainDefinition as f}from"@apollo/client/utilities";import{ApolloClient as m,ApolloNextAppProvider as v,InMemoryCache as w}from"@apollo/experimental-nextjs-app-support";import{createClient as b}from"graphql-ws";import{jsx as h}from"react/jsx-runtime";function y(r){var e=u(function(r){var e=r.graphQLErrors,n=r.networkError;e===null||e===void 0?void 0:e.forEach(function(r){var e=r.message,n=r.locations,o=r.path;return console.error("[GraphQL error]: Message: ".concat(e,", Location: ").concat(n,", Path: ").concat(o))}),n&&console.error("[Network error]: ".concat(n))}),n=new a({uri:r.uri,credentials:"include"}),o=r.wsUrl?new p(b({url:r.wsUrl})):null,t=o?s(function(r){var e=r.query;var n=f(e),o=n.kind,t=n.operation;return o==="OperationDefinition"&&t==="subscription"},o,n):n,i=new l(function(r,e){return r.variables&&(r.variables=JSON.parse(JSON.stringify(r.variables),function(r,e){return r==="__typename"?void 0:e})),e(r)});return{errorLink:e,httpLink:n,wsLink:o,splitLink:t,cleanTypeName:i}}function k(r){var o=r.uri,i=r.wsUrl,a=r.cache,s=a===void 0?new c:a,u=n(r,["uri","wsUrl","cache"]),p=y(e({uri:o,wsUrl:i},r)),f=p.cleanTypeName,m=p.errorLink,v=p.splitLink;return new t(e({cache:s,link:l.from([f,m,v].filter(Boolean))},u))}function O(r){var o=r.uri,t=r.wsUrl,i=r.cache,a=i===void 0?new w:i,c=n(r,["uri","wsUrl","cache"]),s=y(e({uri:o,wsUrl:t},r)),u=s.cleanTypeName,p=s.errorLink,f=s.splitLink;return new m(e({cache:a,link:l.from([u,p,f].filter(Boolean))},c))}function d(r){var e=r.isNextJS,n=e===void 0?!1:e,o=r.options,t=r.children;return n?h(v,{makeClient:function(){return O(o)},children:t}):h(i,{client:k(o),children:t})}export{d as ApolloProvider};