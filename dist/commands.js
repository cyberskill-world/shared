#!/usr/bin/env node
function e(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(t){if(Array.isArray(t))return e(t)}function n(e,t,n,r,s,o,c){try{var i=e[o](c);var a=i.value}catch(e){n(e);return}if(i.done){t(a)}else{Promise.resolve(a).then(r,s)}}function r(e){return function(){var t=this,r=arguments;return new Promise(function(s,o){var c=e.apply(t,r);function i(e){n(c,s,o,i,a,"next",e)}function a(e){n(c,s,o,i,a,"throw",e)}i(undefined)})}}function s(e,t,n){if(t in e){Object.defineProperty(e,t,{value:n,enumerable:true,configurable:true,writable:true})}else{e[t]=n}return e}function o(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};var r=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}r.forEach(function(t){s(e,t,n[t])})}return e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);if(t){r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})}n.push.apply(n,r)}return n}function u(e,t){t=t!=null?t:{};if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(t))}else{a(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function l(e){return t(e)||o(e)||p(e)||c()}function f(e){"@swc/helpers - typeof";return e&&typeof Symbol!=="undefined"&&e.constructor===Symbol?"symbol":typeof e}function p(t,n){if(!t)return;if(typeof t==="string")return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor)r=t.constructor.name;if(r==="Map"||r==="Set")return Array.from(r);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e(t,n)}function h(e,t){var n,r,s,o,c={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]};return o={next:i(0),"throw":i(1),"return":i(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=function(){return this}),o;function i(e){return function(t){return a([e,t])}}function a(o){if(n)throw new TypeError("Generator is already executing.");while(c)try{if(n=1,r&&(s=o[0]&2?r["return"]:o[0]?r["throw"]||((s=r["return"])&&s.call(r),0):r.next)&&!(s=s.call(r,o[1])).done)return s;if(r=0,s)o=[o[0]&2,s.value];switch(o[0]){case 0:case 1:s=o;break;case 4:c.label++;return{value:o[1],done:false};case 5:c.label++;r=o[1];o=[0];continue;case 7:o=c.ops.pop();c.trys.pop();continue;default:if(!(s=c.trys,s=s.length>0&&s[s.length-1])&&(o[0]===6||o[0]===2)){c=0;continue}if(o[0]===3&&(!s||o[1]>s[0]&&o[1]<s[3])){c.label=o[1];break}if(o[0]===6&&c.label<s[1]){c.label=s[1];s=o;break}if(s&&c.label<s[2]){c.label=s[2];c.ops.push(o);break}if(s[2])c.ops.pop();c.trys.pop();continue}o=t.call(e,c)}catch(e){o=[6,e];r=0}finally{n=s=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:true}}}import*as g from"node:fs";import*as m from"node:path";import d from"node:process";import{hideBin as y}from"yargs/helpers";import v from"yargs/yargs";import{dirname as b}from"node:path";import{fileURLToPath as w}from"node:url";var _=w(import.meta.url),S=b(_);import I from"localforage";import k from"node-persist";import O from"node:os";import E from"node:path";import T from"node:process";var P=(typeof window==="undefined"?"undefined":f(window))<"u",j=T.env.CYBERSKILL_STORAGE_DIR||E.join(O.homedir(),".cyberskill-storage");function x(){return A.apply(this,arguments)}function A(){A=r(function(){var e;return h(this,function(t){switch(t.label){case 0:e=!P&&!k.defaultInstance;if(!e)return[3,2];return[4,k.init({dir:j,stringify:JSON.stringify,parse:JSON.parse,encoding:"utf8",logging:!1,forgiveParseErrors:!0})];case 1:e=t.sent();t.label=2;case 2:e;return[2]}})});return A.apply(this,arguments)}var C={get:function e(e){return r(function(){var t,n,r;return h(this,function(s){switch(s.label){case 0:s.trys.push([0,6,,7]);if(!P)return[3,2];return[4,I.getItem(e)];case 1:n=s.sent();return[3,5];case 2:return[4,x()];case 3:s.sent();return[4,k.getItem(e)];case 4:n=(t=s.sent())!==null&&t!==void 0?t:null;s.label=5;case 5:return[2,n];case 6:r=s.sent();return[2,(console.error('❌ [Storage:get] Error getting key "'.concat(e,'":'),r),null)];case 7:return[2]}})})()},set:function e(e,t){return r(function(){var n,r;return h(this,function(s){switch(s.label){case 0:s.trys.push([0,6,,7]);if(!P)return[3,2];return[4,I.setItem(e,t)];case 1:n=s.sent();return[3,5];case 2:return[4,x()];case 3:s.sent();return[4,k.setItem(e,t)];case 4:n=s.sent();s.label=5;case 5:n;return[3,7];case 6:r=s.sent();console.error('❌ [Storage:set] Error setting key "'.concat(e,'":'),r);return[3,7];case 7:return[2]}})})()},remove:function e(e){return r(function(){var t,n;return h(this,function(r){switch(r.label){case 0:r.trys.push([0,6,,7]);if(!P)return[3,2];return[4,I.removeItem(e)];case 1:t=r.sent();return[3,5];case 2:return[4,x()];case 3:r.sent();return[4,k.removeItem(e)];case 4:t=r.sent();r.label=5;case 5:t;return[3,7];case 6:n=r.sent();console.error('❌ [Storage:remove] Error removing key "'.concat(e,'":'),n);return[3,7];case 7:return[2]}})})()},keys:function e(){return r(function(){var e,t;return h(this,function(n){switch(n.label){case 0:n.trys.push([0,6,,7]);if(!P)return[3,2];return[4,I.keys()];case 1:e=n.sent();return[3,5];case 2:return[4,x()];case 3:n.sent();return[4,k.keys()];case 4:e=n.sent()||[];n.label=5;case 5:return[2,e];case 6:t=n.sent();return[2,(console.error("❌ [Storage:keys] Error getting keys:",t),[])];case 7:return[2]}})})()},values:function e(){return r(function(){var e,t;return h(this,function(n){switch(n.label){case 0:n.trys.push([0,7,,8]);if(!P)return[3,3];return[4,I.keys()];case 1:e=n.sent();return[4,Promise.all(e.map(function(e){return I.getItem(e)}))];case 2:return[2,n.sent().filter(function(e){return e!==null})];case 3:return[4,x()];case 4:n.sent();return[4,k.values()];case 5:return[2,n.sent()];case 6:return[3,8];case 7:t=n.sent();return[2,(console.error("❌ [Storage:values] Error getting values:",t),[])];case 8:return[2]}})})()},entries:function e(){return r(function(){var e,t,n,s;return h(this,function(o){switch(o.label){case 0:o.trys.push([0,8,,9]);if(!P)return[3,3];return[4,I.keys()];case 1:e=o.sent();return[4,Promise.all(e.map(/*#__PURE__*/function(){var e=r(function(e){var t;return h(this,function(n){switch(n.label){case 0:return[4,I.getItem(e)];case 1:t=n.sent();return[2,t!==null?[e,t]:null]}})});return function(t){return e.apply(this,arguments)}}()))];case 2:return[2,o.sent().filter(function(e){return e!==null})];case 3:return[4,x()];case 4:o.sent();return[4,k.keys()];case 5:t=o.sent();return[4,k.values()];case 6:n=o.sent();return[2,t.map(function(e,t){return[e,n[t]]})];case 7:return[3,9];case 8:s=o.sent();return[2,(console.error("❌ [Storage:entries] Error getting entries:",s),[])];case 9:return[2]}})})()},clear:function e(){return r(function(){var e,t;return h(this,function(n){switch(n.label){case 0:n.trys.push([0,6,,7]);if(!P)return[3,2];return[4,I.clear()];case 1:e=n.sent();return[3,5];case 2:return[4,x()];case 3:n.sent();return[4,k.clear()];case 4:e=n.sent();n.label=5;case 5:e;return[3,7];case 6:t=n.sent();console.error("❌ [Storage:clear] Error clearing storage:",t);return[3,7];case 7:return[2]}})})()},length:function e(){return r(function(){var e,t;return h(this,function(n){switch(n.label){case 0:n.trys.push([0,6,,7]);if(!P)return[3,2];return[4,I.length()];case 1:e=n.sent();return[3,5];case 2:return[4,x()];case 3:n.sent();return[4,k.keys()];case 4:e=n.sent().length;n.label=5;case 5:return[2,e];case 6:t=n.sent();return[2,(console.error("❌ [Storage:length] Error getting storage length:",t),0)];case 7:return[2]}})})()}};var N=function(e){return"error_list:".concat(e)};function R(e){return D.apply(this,arguments)}function D(){D=r(function(e){var t,n,r;return h(this,function(s){switch(s.label){case 0:if(!e.length)return[2];t=Date.now(),n=N(t);s.label=1;case 1:s.trys.push([1,3,,4]);return[4,C.set(n,{errors:e,timestamp:t})];case 2:s.sent(),console.log("✅ Saved ".concat(e.length," errors to storage with key: ").concat(n));return[3,4];case 3:r=s.sent();console.error("❌ Failed to save errors: ".concat(r.message));return[3,4];case 4:return[2]}})});return D.apply(this,arguments)}function M(){return G.apply(this,arguments)}function G(){G=r(function(){var e,t,n,r,s,o,c,i,a,u,f,p;return h(this,function(h){switch(h.label){case 0:h.trys.push([0,10,,11]);return[4,C.keys()];case 1:e=h.sent().filter(function(e){return e.startsWith("error_list:")}),t=[];n=true,r=false,s=undefined;h.label=2;case 2:h.trys.push([2,7,8,9]);o=e[Symbol.iterator]();h.label=3;case 3:if(!!(n=(c=o.next()).done))return[3,6];i=c.value;return[4,C.get(i)];case 4:u=h.sent();u&&(a=t).push.apply(a,l(u.errors));h.label=5;case 5:n=true;return[3,3];case 6:return[3,9];case 7:f=h.sent();r=true;s=f;return[3,9];case 8:try{if(!n&&o.return!=null){o.return()}}finally{if(r){throw s}}return[7];case 9:return[2,t];case 10:p=h.sent();return[2,(console.error("❌ Failed to retrieve stored errors: ".concat(p.message)),[])];case 11:return[2]}})});return G.apply(this,arguments)}function F(){return H.apply(this,arguments)}function H(){H=r(function(){var e,t,n,r,s,o,c,i,a;return h(this,function(u){switch(u.label){case 0:u.trys.push([0,10,,11]);return[4,C.keys()];case 1:e=u.sent().filter(function(e){return e.startsWith("error_list:")});t=true,n=false,r=undefined;u.label=2;case 2:u.trys.push([2,7,8,9]);s=e[Symbol.iterator]();u.label=3;case 3:if(!!(t=(o=s.next()).done))return[3,6];c=o.value;return[4,C.remove(c)];case 4:u.sent(),console.log("\uD83D\uDDD1️ Removed error list: ".concat(c));u.label=5;case 5:t=true;return[3,3];case 6:return[3,9];case 7:i=u.sent();n=true;r=i;return[3,9];case 8:try{if(!t&&s.return!=null){s.return()}}finally{if(n){throw r}}return[7];case 9:return[3,11];case 10:a=u.sent();console.error("❌ Failed to clear error lists: ".concat(a.message));return[3,11];case 11:return[2]}})});return H.apply(this,arguments)}import U from"boxen";import W from"chalk";var K=W.blue,L=W.red,J=W.yellow,Y=W.green,$=W.gray,B=W.bold;function q(e,t){var n=new Map([[L,"red"],[J,"yellow"],[Y,"green"]]).get(t)||"green";return U(B(t(e)),{padding:1,margin:1,borderStyle:"arrow",borderColor:n})}function z(e,t,n,r){e.length&&(e.forEach(function(e){var r=e.file,s=e.position,o=e.rule,c=e.message;console.log("".concat(t("".concat(n," File:"))," ").concat(K("".concat(r).concat(s?":".concat(s):"")))),o&&console.log("   ".concat(t("Rule:")," ").concat(t(o))),console.log("   ".concat(t("Message:")," ").concat(t(c)))}),console.log(q(B(t("".concat(n," Total ").concat(r,": ").concat(e.length))),t)),console.log($("─".repeat(40))))}function Q(){return V.apply(this,arguments)}function V(){V=r(function(){var e,t,n;return h(this,function(r){switch(r.label){case 0:return[4,M()];case 1:e=r.sent(),t=e.filter(function(e){return e.type==="error"}),n=e.filter(function(e){return e.type==="warning"});!t.length&&!n.length?console.log(q(B(Y("✔ NO ISSUE FOUND!")),Y)):(z(n,J,"⚠","Warnings"),z(t,L,"✖","Errors"));return[2]}})});return V.apply(this,arguments)}import X from"node:process";import Z from"ora";function ee(e,t){return et.apply(this,arguments)}function et(){et=r(function(e,t){var n,r;return h(this,function(s){switch(s.label){case 0:n=Z({text:e,color:"cyan",spinner:"dots"}).start();s.label=1;case 1:s.trys.push([1,4,,5]);return[4,t()];case 2:s.sent();return[4,M()];case 3:s.sent().length?X.exit(1):n.succeed("".concat(e,"  ✅"));return[3,5];case 4:r=s.sent();throw n.fail("".concat(e," ❌")),r;case 5:return[2]}})});return et.apply(this,arguments)}import en from"chalk";import{exec as er}from"node:child_process";import es from"node:process";import*as eo from"node:util";var ec=eo.promisify(er),ei=en.gray,ea=en.white;function eu(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";var n=new Date().toLocaleString();console.log("".concat(t," [").concat(n,"] ").concat(ea(e)))}function el(e){var t=/^\s*(\d+):(\d+)\s+(error|warning)\s+(\S+)\s+(\S+)$/,n=/^(.+?)\((\d+),(\d+)\):\s+(error|warning)\s+TS\d+:\s+(\S.+)$/,r=/^✖\s+(.*?)\s+\[(.*?)\]$/,s=[],o="",c=[];e.split("\n").forEach(function(e){if(e.startsWith("/"))o=e.trim();else{var i=t.exec(e);if(i&&o)c.push({file:o,position:"".concat(i[1],":").concat(i[2]),type:i[3]==="error"?"error":"warning",message:i[4].trim(),rule:i[5].trim()});else{var a=n.exec(e);if(a)c.push({file:a[1],position:"".concat(a[2],":").concat(a[3]),type:a[4],message:a[5].trim()});else{var u=r.exec(e);u?c.push({file:"commitlint",type:"error",message:u[1].trim(),rule:u[2].trim()}):s.push(e.trim())}}}}),c.length>0&&R(c),s.length>0&&(console.log(ei("Unmatched lines:")),s.forEach(function(e){return console.info(e)}))}function ef(e){try{var t=JSON.parse(e),n=[];t.forEach(function(e){var t=e.filePath,r=e.messages;r.forEach(function(e){var r=e.severity,s=e.line,o=e.column,c=e.ruleId,i=e.message;n.push({type:r===2?"error":"warning",file:t,position:"".concat(s,":").concat(o),rule:c,message:i})})}),n.length>0&&R(n)}catch(t){console.log("output",e),el(e)}}function ep(e,t){return eh.apply(this,arguments)}function eh(){eh=r(function(e,t){var n,r,s,o,c,i,a,u,l;var f=arguments;return h(this,function(p){switch(p.label){case 0:n=f.length>2&&f[2]!==void 0?f[2]:ef;eu(t);r=new AbortController;es.on("SIGINT",function(){console.log("Terminating process..."),r.abort(),es.exit()});p.label=1;case 1:p.trys.push([1,3,,4]);return[4,ec(e,{maxBuffer:0x6400000,signal:r.signal})];case 2:s=p.sent(),o=s.stdout,c=s.stderr;[o,c].forEach(function(e){return e&&n(e)});return[3,4];case 3:i=p.sent();a=i.stdout,u=i.stderr,l=i.message;[a,u].forEach(function(e){return e&&n(e)}),!u&&!a&&console.error("Command failed: ".concat(l));return[3,4];case 4:return[2]}})});return eh.apply(this,arguments)}import eg from"node-fetch";import em from"node:fs";import ed from"node:path";import ey from"node:process";var ev=24*60*60*1e3;function eb(e){return ew.apply(this,arguments)}function ew(){ew=r(function(e){var t,n,r,s,o,c,i,a,u,l;var f=arguments;return h(this,function(p){switch(p.label){case 0:t=f.length>1&&f[1]!==void 0?f[1]:!1;n="npm_version:".concat(e),r="npm_metadata:".concat(e);return[4,C.get(n)];case 1:s=p.sent();return[4,C.get(r)];case 2:o=p.sent(),c=s&&Date.now()-s.timestamp<ev;if(!t&&c)return[2,(console.log("Using cached version for ".concat(e,": ").concat(s.version)),s.version)];i={};(o===null||o===void 0?void 0:o.etag)&&(i["If-None-Match"]=o.etag),(o===null||o===void 0?void 0:o.lastModified)&&(i["If-Modified-Since"]=o.lastModified);p.label=3;case 3:p.trys.push([3,8,,9]);console.log("Fetching latest version for ".concat(e,"..."));return[4,eg("https://registry.npmjs.org/".concat(e,"/latest"),{headers:i})];case 4:a=p.sent();if(a.status===304&&s)return[2,(console.log("Cache is still valid for ".concat(e,": ").concat(s.version)),s.version)];if(!a.ok)throw new Error("Failed to fetch latest version: ".concat(a.statusText));return[4,a.json()];case 5:u=p.sent().version;return[4,C.set(n,{version:u,timestamp:Date.now()})];case 6:p.sent();return[4,C.set(r,{etag:a.headers.get("ETag")||void 0,lastModified:a.headers.get("Last-Modified")||void 0})];case 7:return[2,(p.sent(),console.log("Cached latest version for ".concat(e,": ").concat(u)),u)];case 8:l=p.sent();if(console.error("Error fetching latest version for ".concat(e,": ").concat(l.message)),s)return[2,(console.warn("Falling back to cached version for ".concat(e,": ").concat(s.version)),s.version)];throw l;case 9:return[2]}})});return ew.apply(this,arguments)}function e_(e){return ed.join(ey.cwd(),"node_modules",e,"package.json")}function eS(){return ed.join(ey.cwd(),"package.json")}function eI(e){return ek.apply(this,arguments)}function ek(){ek=r(function(e){var t,n,r,s,o;var c=arguments;return h(this,function(i){switch(i.label){case 0:t=c.length>1&&c[1]!==void 0?c[1]:!0;i.label=1;case 1:i.trys.push([1,3,,4]);n=e_(e);if(!em.existsSync(n))return[2,(console.log("".concat(e," is not installed.")),!0)];r=JSON.parse(em.readFileSync(n,"utf-8")).version;return[4,eb(e,t)];case 2:s=i.sent();return[2,(console.log("Installed version of ".concat(e,": ").concat(r)),console.log("Latest version of ".concat(e,": ").concat(s)),r!==s)];case 3:o=i.sent();return[2,(console.warn("Failed to check version for ".concat(e,": ").concat(o.message)),!0)];case 4:return[2]}})});return ek.apply(this,arguments)}function eO(e){return eE.apply(this,arguments)}function eE(){eE=r(function(e){var t,n,r,o;return h(this,function(c){switch(c.label){case 0:c.trys.push([0,4,,5]);return[4,eb(e,!0)];case 1:t=c.sent(),n=eS(),r=JSON.parse(em.readFileSync(n,"utf-8"));r.dependencies=u(i({},r.dependencies),s({},e,t)),em.writeFileSync(n,JSON.stringify(r,null,2)),console.log("Updated ".concat(e," to version ").concat(t));return[4,ep("npm i -f","Installing all dependencies with updated ".concat(e,"..."))];case 2:c.sent();return[4,ep("npm run lint:fix","Fixing lint issues for ".concat(e,"..."))];case 3:c.sent(),console.log("".concat(e," updated successfully."));return[3,5];case 4:o=c.sent();throw console.error("Failed to update ".concat(e,": ").concat(o.message)),o;case 5:return[2]}})});return eE.apply(this,arguments)}function eT(e,t){try{var n=ed.join(e,"package.json");return em.existsSync(n)?JSON.parse(em.readFileSync(n,"utf-8")).name===t:!1}catch(e){return console.error("Error reading package.json: ".concat(e.message)),!1}}var eP=d.env.INIT_CWD||d.cwd(),ej={INIT_CWD:eP,TS_CONFIG_PATH:"".concat(eP,"/tsconfig.json"),HUSKY_PATH:"".concat(eP,"/.husky"),GIT_HOOK_PATH:"".concat(eP,"/.git/hooks"),GIT_COMMIT_MSG:"".concat(eP,"/.git/COMMIT_EDITMSG"),SIMPLE_GIT_HOOKS_PATH:"".concat(eP,"/.simple-git-hooks.json"),PACKAGE_NAME:"@cyberskill/shared"};function ex(){return eA.apply(this,arguments)}function eA(){eA=r(function(){var e;return h(this,function(t){switch(t.label){case 0:if(!g.existsSync(ej.TS_CONFIG_PATH))return[3,2];return[4,ep("npx tsc -p ".concat(ej.TS_CONFIG_PATH," --noEmit"),"TypeScript checking...")];case 1:e=t.sent();return[3,3];case 2:e=eu("tsconfig.json file not found.","⚠️");t.label=3;case 3:e;return[2]}})});return eA.apply(this,arguments)}function eC(){return eN.apply(this,arguments)}function eN(){eN=r(function(){var e,t;var n=arguments;return h(this,function(r){switch(r.label){case 0:e=n.length>0&&n[0]!==void 0?n[0]:!1;t="npx eslint ".concat(ej.INIT_CWD).concat(e?" --fix":" --format json");return[4,ep(t,"Eslint ".concat(e?"fixing":"checking","..."))];case 1:r.sent();return[2]}})});return eN.apply(this,arguments)}function eR(){return eD.apply(this,arguments)}function eD(){eD=r(function(){var e;return h(this,function(t){switch(t.label){case 0:e="npx lint-staged --config ".concat(m.resolve(S,"./configs/lint-staged/base.js"));return[4,ep(e,"Lint-staged processing...")];case 1:t.sent();return[2]}})});return eD.apply(this,arguments)}function eM(){return eG.apply(this,arguments)}function eG(){eG=r(function(){return h(this,function(e){switch(e.label){case 0:eu("Starting lint check for ".concat(ej.INIT_CWD),"\uD83D\uDE80");return[4,ee("Running lint checks...",/*#__PURE__*/r(function(){return h(this,function(e){switch(e.label){case 0:return[4,F()];case 1:e.sent();return[4,Promise.all([ex(),eC()])];case 2:e.sent(),Q();return[2]}})}))];case 1:e.sent();return[2]}})});return eG.apply(this,arguments)}function eF(){return eH.apply(this,arguments)}function eH(){eH=r(function(){return h(this,function(e){switch(e.label){case 0:eu("Starting lint and format fix for ".concat(ej.INIT_CWD),"\uD83D\uDE80");return[4,ee("Fixing issues...",/*#__PURE__*/r(function(){return h(this,function(e){switch(e.label){case 0:return[4,eC(!0)];case 1:e.sent();return[2]}})}))];case 1:e.sent();return[2]}})});return eH.apply(this,arguments)}function eU(){return eW.apply(this,arguments)}function eW(){eW=r(function(){return h(this,function(e){switch(e.label){case 0:return[4,ep("npx @eslint/config-inspector","Lint inspect processing...")];case 1:e.sent();return[2]}})});return eW.apply(this,arguments)}function eK(){return eL.apply(this,arguments)}function eL(){eL=r(function(){return h(this,function(e){switch(e.label){case 0:eu("Starting lint-staged process for ".concat(d.env.INIT_CWD),"\uD83D\uDE80");return[4,ee("Running lint-staged...",/*#__PURE__*/r(function(){return h(this,function(e){switch(e.label){case 0:return[4,F()];case 1:e.sent();return[4,Promise.all([ex(),eR()])];case 2:e.sent(),Q();return[2]}})}))];case 1:e.sent();return[2]}})});return eL.apply(this,arguments)}function eJ(){return eY.apply(this,arguments)}function eY(){eY=r(function(){return h(this,function(e){switch(e.label){case 0:eu("Starting commitlint process for ".concat(ej.INIT_CWD),"\uD83D\uDE80");return[4,ee("Running commitlint...",/*#__PURE__*/r(function(){var e,t;return h(this,function(n){switch(n.label){case 0:return[4,F()];case 1:n.sent();e=m.resolve(S,"./configs/commitlint/base.js"),t="npx --no -- commitlint --edit ".concat(ej.GIT_COMMIT_MSG," --config ").concat(e);return[4,ep(t,"Commitlint processing...")];case 2:n.sent(),Q();return[2]}})}))];case 1:e.sent();return[2]}})});return eY.apply(this,arguments)}function e$(){return eB.apply(this,arguments)}function eB(){eB=r(function(){var e,t;return h(this,function(n){switch(n.label){case 0:e=g.existsSync(ej.HUSKY_PATH);if(!e)return[3,2];return[4,ep("npx rimraf ".concat(ej.HUSKY_PATH," ").concat(ej.GIT_HOOK_PATH," && git config core.hooksPath ").concat(ej.GIT_HOOK_PATH),"Removing husky hooks...")];case 1:e=n.sent();n.label=2;case 2:e;t=eT(ej.INIT_CWD,ej.PACKAGE_NAME);g.writeFileSync(ej.SIMPLE_GIT_HOOKS_PATH,JSON.stringify({"pre-commit":"".concat(t?"npm run build && ":"","npx --yes cyberskill lint-staged"),"commit-msg":"npx --yes cyberskill commitlint"},null,4));return[4,ep("npx simple-git-hooks","Setting up git hooks...")];case 3:if(n.sent(),g.existsSync(ej.SIMPLE_GIT_HOOKS_PATH))try{g.unlinkSync(ej.SIMPLE_GIT_HOOKS_PATH)}catch(e){console.error("Failed to unlink git hooks config:",e)}return[2]}})});return eB.apply(this,arguments)}function eq(){return ez.apply(this,arguments)}function ez(){ez=r(function(){return h(this,function(e){switch(e.label){case 0:eu("Starting setup process for ".concat(ej.INIT_CWD),"\uD83D\uDE80");return[4,ee("Setting up...",/*#__PURE__*/r(function(){var e,t,n,r,s,o,c;return h(this,function(i){switch(i.label){case 0:e=m.join(ej.INIT_CWD,"package.json");i.label=1;case 1:i.trys.push([1,9,10,12]);n=JSON.parse(g.readFileSync(e,"utf-8"));if(!eT(ej.INIT_CWD,ej.PACKAGE_NAME))return[3,2];r=eu("Cyberskill is the current project. No setup needed.","✅");return[3,8];case 2:o=!((t=n.dependencies)===null||t===void 0?void 0:t[ej.PACKAGE_NAME]);if(o)return[3,4];return[4,eI(ej.PACKAGE_NAME)];case 3:o=i.sent();i.label=4;case 4:if(!o)return[3,6];eu("Cyberskill is missing or outdated. Updating...");return[4,eO(ej.PACKAGE_NAME)];case 5:s=i.sent();return[3,7];case 6:s=eu("Cyberskill is up to date","✅");i.label=7;case 7:r=s;i.label=8;case 8:r;return[3,12];case 9:c=i.sent();throw console.error("Error reading package.json: ".concat(c.message)),c;case 10:return[4,e$()];case 11:i.sent();return[7];case 12:return[2]}})}))];case 1:e.sent();return[2]}})});return ez.apply(this,arguments)}function eQ(){return eV.apply(this,arguments)}function eV(){eV=r(function(){return h(this,function(e){switch(e.label){case 0:eu("Starting reset process for ".concat(ej.INIT_CWD),"\uD83D\uDE80");return[4,ee("Resetting...",/*#__PURE__*/r(function(){return h(this,function(e){switch(e.label){case 0:return[4,ep("npx rimraf ".concat(ej.INIT_CWD,"/node_modules ").concat(ej.INIT_CWD,"/package-lock.json"),"Cleaning node_modules and package-lock.json...")];case 1:e.sent();return[4,ep("npm i -f","Installing all dependencies...")];case 2:e.sent(),e$();return[2]}})}))];case 1:e.sent();return[2]}})});return eV.apply(this,arguments)}function eX(){return eZ.apply(this,arguments)}function eZ(){eZ=r(function(){var e;return h(this,function(t){switch(t.label){case 0:e=m.resolve(S,"./configs/vitest/react/unit.js");eu("Starting unit tests for ".concat(ej.INIT_CWD),"\uD83D\uDE80");return[4,ee("Running unit tests...",/*#__PURE__*/r(function(){return h(this,function(t){switch(t.label){case 0:return[4,ep("npx vitest --config ".concat(e),"Running unit tests...")];case 1:t.sent();return[2]}})}))];case 1:t.sent();return[2]}})});return eZ.apply(this,arguments)}function e2(){return e0.apply(this,arguments)}function e0(){e0=r(function(){var e;return h(this,function(t){switch(t.label){case 0:e=m.resolve(S,"./configs/vitest/react/e2e.js");eu("Starting e2e tests for ".concat(ej.INIT_CWD),"\uD83D\uDE80");return[4,ee("Running end-to-end tests...",/*#__PURE__*/r(function(){return h(this,function(t){switch(t.label){case 0:return[4,ep("npx vitest --config ".concat(e),"Running e2e tests...")];case 1:t.sent();return[2]}})}))];case 1:t.sent();return[2]}})});return e0.apply(this,arguments)}v(y(d.argv)).command("lint","Run linting checks",eM).command("lint:fix","Fix linting and formatting issues",eF).command("lint:inspect","Inspect linting rules",eU).command("lint-staged","Run lint-staged with given configuration",eK).command("commitlint","Run commitlint with given configuration",eJ).command("setup","Run setup with given configuration",eq).command("reset","Reset dependencies and install",eQ).command("test:unit","Run unit tests",eX).command("test:e2e","Run e2e tests",e2).help().parse();