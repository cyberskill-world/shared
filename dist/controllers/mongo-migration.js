function e(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function t(e){if(Array.isArray(e))return e}function r(e,t,r,n,s,u,o){try{var c=e[u](o);var a=c.value}catch(e){r(e);return}if(c.done){t(a)}else{Promise.resolve(a).then(n,s)}}function n(e){return function(){var t=this,n=arguments;return new Promise(function(s,u){var o=e.apply(t,n);function c(e){r(o,s,u,c,a,"next",e)}function a(e){r(o,s,u,c,a,"throw",e)}c(undefined)})}}function s(e,t){if(!(e instanceof t)){throw new TypeError("Cannot call a class as a function")}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(e,n.key,n)}}function o(e,t,r){if(t)u(e.prototype,t);if(r)u(e,r);return e}function c(e,t,r){if(t in e){Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true,writable:true})}else{e[t]=r}return e}function a(e,t){var r=e==null?null:typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r==null)return;var n=[];var s=true;var u=false;var o,c;try{for(r=r.call(e);!(s=(o=r.next()).done);s=true){n.push(o.value);if(t&&n.length===t)break}}catch(e){u=true;c=e}finally{try{if(!s&&r["return"]!=null)r["return"]()}finally{if(u)throw c}}return n}function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};var n=Object.keys(r);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))}n.forEach(function(t){c(e,t,r[t])})}return e}function f(e,r){return t(e)||a(e,r)||m(e,r)||i()}function m(t,r){if(!t)return;if(typeof t==="string")return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor)n=t.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,r)}function p(e,t){var r,n,s,u,o={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]};return u={next:c(0),"throw":c(1),"return":c(2)},typeof Symbol==="function"&&(u[Symbol.iterator]=function(){return this}),u;function c(e){return function(t){return a([e,t])}}function a(u){if(r)throw new TypeError("Generator is already executing.");while(o)try{if(r=1,n&&(s=u[0]&2?n["return"]:u[0]?n["throw"]||((s=n["return"])&&s.call(n),0):n.next)&&!(s=s.call(n,u[1])).done)return s;if(n=0,s)u=[u[0]&2,s.value];switch(u[0]){case 0:case 1:s=u;break;case 4:o.label++;return{value:u[1],done:false};case 5:o.label++;n=u[1];u=[0];continue;case 7:u=o.ops.pop();o.trys.pop();continue;default:if(!(s=o.trys,s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){o=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){o.label=u[1];break}if(u[0]===6&&o.label<s[1]){o.label=s[1];s=u;break}if(s&&o.label<s[2]){o.label=s[2];o.ops.push(u);break}if(s[2])o.ops.pop();o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e];n=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:true}}}import d from"unorm";import h from"boxen";import y from"chalk";import{exec as v}from"node:child_process";import g from"node:process";import*as b from"node:util";import w from"localforage";import O from"node-persist";import k from"node:os";import D from"node:path";import C from"node:process";var S=C.env.CYBERSKILL_STORAGE_DIR||D.join(k.homedir(),".cyberskill-storage");var j=g.env.DEBUG==="true",A=b.promisify(v),M=y.gray,E=y.blue;import{format as P}from"date-fns";function x(){return P(new Date,"yyyy-MM-dd HH:mm:ss.SSS")}import{GraphQLError as _}from"graphql";import I from"crypto-js";import N from"mongoose-aggregate-paginate-v2";import T from"mongoose-paginate-v2";import U from"slugify";import{v4 as R}from"uuid";var G=U.default||U;function L(){return{id:R(),isDel:!1,createdAt:x(),updatedAt:x()}}import $ from"node-fetch";import{dirname as B}from"node:path";import H from"node:process";import{fileURLToPath as q}from"node:url";var K=q(import.meta.url),Q=B(K),W=H.env.INIT_CWD||H.cwd();var Y=24*60*60*1e3;var z={a:["\xe0","\xe1","ạ","ả","\xe3","\xe2","ầ","ấ","ậ","ẩ","ẫ","ă","ằ","ắ","ặ","ẳ","ẵ"],e:["\xe8","\xe9","ẹ","ẻ","ẽ","\xea","ề","ế","ệ","ể","ễ"],i:["\xec","\xed","ị","ỉ","ĩ"],o:["\xf2","\xf3","ọ","ỏ","\xf5","\xf4","ồ","ố","ộ","ổ","ỗ","ơ","ờ","ớ","ợ","ở","ỡ"],u:["\xf9","\xfa","ụ","ủ","ũ","ư","ừ","ứ","ự","ử","ữ"],y:["ỳ","\xfd","ỵ","ỷ","ỹ"],d:["đ"]},F=Object.entries(z).reduce(function(e,t){var r=f(t,2),n=r[0],s=r[1];return e[n.toUpperCase()]=s.map(function(e){return e.toUpperCase()}),e},{});var J=/*#__PURE__*/function(){"use strict";function e(t,r){s(this,e);this.collection=t.collection(r)}o(e,[{key:"createOne",value:function e(e){var t=this;return n(function(){var r,n,s;return p(this,function(u){switch(u.label){case 0:u.trys.push([0,2,,3]);r=l({},L(),e);n={success:!0,message:"Document created successfully"};return[4,t.collection.insertOne(r)];case 1:return[2,(n.result=u.sent(),n)];case 2:s=u.sent();return[2,{success:!1,message:s.message}];case 3:return[2]}})})()}},{key:"createMany",value:function e(e){var t=this;return n(function(){var r,n,s;return p(this,function(u){switch(u.label){case 0:u.trys.push([0,2,,3]);r=e.map(function(e){return l({},L(),e)});return[4,t.collection.insertMany(r)];case 1:n=u.sent();return[2,n.insertedCount===0?{success:!1,message:"No documents were inserted"}:{success:!0,message:"".concat(n.insertedCount," documents created successfully"),result:n}];case 2:s=u.sent();return[2,{success:!1,message:s.message}];case 3:return[2]}})})()}},{key:"findOne",value:function e(e){var t=this;return n(function(){var r,n;return p(this,function(s){switch(s.label){case 0:s.trys.push([0,2,,3]);return[4,t.collection.findOne(e)];case 1:r=s.sent();return[2,r?{success:!0,message:"Document found",result:r}:{success:!1,message:"Document not found"}];case 2:n=s.sent();return[2,{success:!1,message:n.message}];case 3:return[2]}})})()}},{key:"findAll",value:function e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var t=this;return n(function(){var r,n;return p(this,function(s){switch(s.label){case 0:s.trys.push([0,2,,3]);r={success:!0,message:"Documents retrieved successfully"};return[4,t.collection.find(e).toArray()];case 1:return[2,(r.result=s.sent(),r)];case 2:n=s.sent();return[2,{success:!1,message:n.message}];case 3:return[2]}})})()}},{key:"count",value:function e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};var t=this;return n(function(){var r,n;return p(this,function(s){switch(s.label){case 0:s.trys.push([0,2,,3]);r={success:!0,message:"Count retrieved successfully"};return[4,t.collection.countDocuments(e)];case 1:return[2,(r.result=s.sent(),r)];case 2:n=s.sent();return[2,{success:!1,message:n.message}];case 3:return[2]}})})()}},{key:"updateOne",value:function e(e,t){var r=this;return n(function(){var n,s;return p(this,function(u){switch(u.label){case 0:u.trys.push([0,2,,3]);return[4,r.collection.updateOne(e,{$set:t})];case 1:n=u.sent();return[2,n.matchedCount===0?{success:!1,message:"No documents matched the filter"}:{success:!0,message:"Document updated successfully",result:n}];case 2:s=u.sent();return[2,{success:!1,message:s.message}];case 3:return[2]}})})()}},{key:"updateMany",value:function e(e,t){var r=this;return n(function(){var n,s;return p(this,function(u){switch(u.label){case 0:u.trys.push([0,2,,3]);return[4,r.collection.updateMany(e,{$set:t})];case 1:n=u.sent();return[2,n.matchedCount===0?{success:!1,message:"No documents matched the filter"}:{success:!0,message:"Documents updated successfully",result:n}];case 2:s=u.sent();return[2,{success:!1,message:s.message}];case 3:return[2]}})})()}},{key:"deleteOne",value:function e(e){var t=this;return n(function(){var r,n;return p(this,function(s){switch(s.label){case 0:s.trys.push([0,2,,3]);return[4,t.collection.deleteOne(e)];case 1:r=s.sent();return[2,r.deletedCount===0?{success:!1,message:"No documents matched the filter"}:{success:!0,message:"Document deleted successfully",result:r}];case 2:n=s.sent();return[2,{success:!1,message:n.message}];case 3:return[2]}})})()}},{key:"deleteMany",value:function e(e){var t=this;return n(function(){var r,n;return p(this,function(s){switch(s.label){case 0:s.trys.push([0,2,,3]);return[4,t.collection.deleteMany(e)];case 1:r=s.sent();return[2,r.deletedCount===0?{success:!1,message:"No documents matched the filter"}:{success:!0,message:"Documents deleted successfully",result:r}];case 2:n=s.sent();return[2,{success:!1,message:n.message}];case 3:return[2]}})})()}}]);return e}();export{J as MigrationController};