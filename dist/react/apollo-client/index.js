function r(r,e){if(e==null||e>r.length)e=r.length;for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function e(r){if(Array.isArray(r))return r}function t(e){if(Array.isArray(e))return r(e)}function n(r){if(r===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return r}function o(r,e,t){e=u(e);return h(r,A()?Reflect.construct(e,t||[],u(r).constructor):e.apply(r,t))}function a(r,e){if(!(r instanceof e)){throw new TypeError("Cannot call a class as a function")}}function l(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(r,n.key,n)}}function i(r,e,t){if(e)l(r.prototype,e);if(t)l(r,t);return r}function c(r,e,t){if(e in r){Object.defineProperty(r,e,{value:t,enumerable:true,configurable:true,writable:true})}else{r[e]=t}return r}function u(r){u=Object.setPrototypeOf?Object.getPrototypeOf:function r(r){return r.__proto__||Object.getPrototypeOf(r)};return u(r)}function s(r,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:true,configurable:true}});if(e)g(r,e)}function f(r,e){if(e!=null&&typeof Symbol!=="undefined"&&e[Symbol.hasInstance]){return!!e[Symbol.hasInstance](r)}else{return r instanceof e}}function p(r){if(typeof Symbol!=="undefined"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function m(r,e){var t=r==null?null:typeof Symbol!=="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(t==null)return;var n=[];var o=true;var a=false;var l,i;try{for(t=t.call(r);!(o=(l=t.next()).done);o=true){n.push(l.value);if(e&&n.length===e)break}}catch(r){a=true;i=r}finally{try{if(!o&&t["return"]!=null)t["return"]()}finally{if(a)throw i}}return n}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};var n=Object.keys(t);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))}n.forEach(function(e){c(r,e,t[e])})}return r}function b(r,e){if(r==null)return{};var t=E(r,e);var n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(o=0;o<a.length;o++){n=a[o];if(e.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(r,n))continue;t[n]=r[n]}}return t}function E(r,e){if(r==null)return{};var t={};var n=Object.keys(r);var o,a;for(a=0;a<n.length;a++){o=n[a];if(e.indexOf(o)>=0)continue;t[o]=r[o]}return t}function h(r,e){if(e&&(R(e)==="object"||typeof e==="function")){return e}return n(r)}function g(r,e){g=Object.setPrototypeOf||function r(r,e){r.__proto__=e;return r};return g(r,e)}function w(r,t){return e(r)||m(r,t)||O(r,t)||v()}function k(r){return t(r)||p(r)||O(r)||d()}function R(r){"@swc/helpers - typeof";return r&&typeof Symbol!=="undefined"&&r.constructor===Symbol?"symbol":typeof r}function O(e,t){if(!e)return;if(typeof e==="string")return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}function A(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(r){}return(A=function(){return!!r})()}var S=Object.defineProperty;var L=function(r,e,t){return e in r?S(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t};var P=function(r,e){return S(r,"name",{value:e,configurable:!0})};var j=function(r,e,t){return L(r,(typeof e==="undefined"?"undefined":R(e))!="symbol"?e+"":e,t)};import{ApolloClient as C,ApolloError as x,ApolloLink as I,ApolloProvider as N,from as _,HttpLink as U,InMemoryCache as T,split as Q}from"@apollo/client";import{onError as D}from"@apollo/client/link/error";import{removeTypenameFromVariables as G}from"@apollo/client/link/remove-typename";import{GraphQLWsLink as F}from"@apollo/client/link/subscriptions";import{getMainDefinition as M}from"@apollo/client/utilities";import{createClient as q}from"graphql-ws";import{useMemo as J}from"react";import{FaInfo as H}from"react-icons/fa6";import{use as B}from"react";import{FaRepeat as W}from"react-icons/fa6";import{createContext as V}from"react";var $=V(void 0);import z from"../apollo-error/apollo-error.module.scss";function K(){var r=B($),e=r===null||r===void 0?void 0:r.error;if(!e)return null;var t=P(function(r,e){return(e===null||e===void 0?void 0:e.length)?React.createElement("div",null,React.createElement("strong",null,r,":"),React.createElement("ul",null,e.map(function(r){return React.createElement("li",{key:r.message},r.message)}))):null},"renderErrorList");return React.createElement("div",{className:z["modal-backdrop"]},React.createElement("div",{className:z["modal-content"]},React.createElement("button",{type:"button",className:z["btn-close"],onClick:r.hideError},"✕"),React.createElement("div",{className:z["error-title"]},React.createElement("button",{type:"button",className:z["btn-retry"],onClick:P(function(){return window.location.reload()},"onClick")},React.createElement(W,null))," ",e.message),React.createElement("div",{className:z["error-details"]},e.networkError&&React.createElement("pre",{className:"network"},React.createElement("strong",null,"Network Error:")," ",e.networkError.message),t("GraphQL Errors",k(e.graphQLErrors)),t("Protocol Errors",k(e.protocolErrors)),t("Client Errors",k(e.clientErrors)),e.extraInfo&&React.createElement("pre",{className:"extra"},React.createElement("strong",null,"Extra Info:")," ",JSON.stringify(e.extraInfo,null,4)))))}P(K,"ApolloError");import{use as X}from"react";import{useEffect as Y,useMemo as Z,useState as rr}from"react";var re=null;function rt(r){re=r}P(rt,"setGlobalApolloErrorCallback");function rn(r){re===null||re===void 0?void 0:re(r)}P(rn,"showGlobalApolloError");function ro(r){var e=r.children;var t=w(rr(null),2),n=t[0],o=t[1];Y(function(){rt(o)},[]);var a=Z(function(){return{error:n,showError:o,hideError:P(function(){return o(null)},"hideError")}},[n]);return React.createElement($,{value:a},e)}P(ro,"ApolloErrorProvider");import{consola as ra}from"consola/browser";var rl={silent:ra.silent,level:ra.level,fatal:ra.fatal,error:ra.error,warn:ra.warn,log:ra.log,info:ra.info,success:ra.success,ready:ra.ready,start:ra.start,box:ra.box,debug:ra.debug,trace:ra.trace,verbose:ra.verbose};import{toast as ri,Toaster as rc}from"react-hot-toast";var ru="/graphql";var rs,rf=(rs=/*#__PURE__*/function(r){"use strict";s(e,r);function e(){a(this,e);var r;r=o(this,e,arguments);j(r,"count",0);return r}i(e,[{key:"request",value:function r(r,e){var t=this;var n=Date.now();return this.count+=1,e(r).map(function(e){var o=Date.now()-n,a=r.operationName||"Unnamed";return rl.info("[Apollo] #".concat(t.count,": ").concat(a," (").concat(o,"ms)")),e})}}]);return e}(I),P(rs,"DevLoggerLink"),rs);function rp(r){var e=r.uri,t=r.wsUrl,n=r.customLinks,o=new rf,a=D(function(r){var e=r.graphQLErrors,t=r.networkError,n=r.protocolErrors,o=r.operation;var a=(o===null||o===void 0?void 0:o.operationName)||"Unknown";if(e&&e.forEach(function(r){var e=r.message,t=r.locations,n=r.path;rl.error("[GraphQL error] ".concat(a,": ").concat(e,", Location: ").concat(JSON.stringify(t),", Path: ").concat(n))}),n&&n.forEach(function(r){var e=r.message,t=r.extensions;rl.error("[Protocol error]: ".concat(e,", Extensions: ").concat(JSON.stringify(t)))}),t&&rl.error("[Network error]: ".concat(t)),e||n||t){var l,i;var c=(e===null||e===void 0?void 0:(l=e[0])===null||l===void 0?void 0:l.message)||(n===null||n===void 0?void 0:(i=n[0])===null||i===void 0?void 0:i.message)||(t===null||t===void 0?void 0:t.message)||"Unexpected error",u=new x({graphQLErrors:e||[],protocolErrors:n||[],clientErrors:[],networkError:t||null,errorMessage:c,extraInfo:{operation:o}});ri.error(function(r){return React.createElement(React.Fragment,null,c,"\xa0",React.createElement(H,{cursor:"pointer",onClick:P(function(){setTimeout(function(){rn(u)},0),ri.dismiss(r.id)},"onClick")}))})}}),l=G();e||rl.warn('[Apollo] No GraphQL URI provided — using "'.concat(ru,'" as default'));var i=new U({uri:e!==null&&e!==void 0?e:ru,credentials:"include"}),c=t?new F(q({url:t})):I.empty(),u=f(c,I)?Q(function(r){var e=r.query;var t=M(e);return t.kind==="OperationDefinition"&&t.operation==="subscription"},c,i):i;return u===i&&t&&rl.warn("[Apollo] WS URL is set, but subscriptions fallback to HTTP. Check your wsLink config."),[o,a,l].concat(k(n!==null&&n!==void 0?n:[]),[u])}P(rp,"createApolloLinks");function rm(r){var e=r.isNextJS,t=r.options,n=r.children,o=r.client,a=r.provider,l=r.cache;var i=t||{},c=i.uri,u=i.wsUrl,s=i.customLinks,p=b(i,["uri","wsUrl","customLinks"]),m=o!==null&&o!==void 0?o:C;if(typeof m!="function")throw new TypeError("Invalid ApolloClient provided. Ensure CustomClient is a class.");var v=a||N,d=J(function(){return _(rp({uri:c!==null&&c!==void 0?c:ru,wsUrl:u!==null&&u!==void 0?u:"",customLinks:s!==null&&s!==void 0?s:[]}))},[c,u,s]),E=J(function(){return f(l,T)?l:new T},[l]),h=J(function(){return new m(y({link:d,cache:E},p))},[m,d,E,p]),g=e?React.createElement(v,{makeClient:P(function(){return h},"makeClient")},n):React.createElement(v,{client:h},n);return React.createElement(React.Fragment,null,React.createElement(ro,null,g,React.createElement(K,null)),React.createElement(rc,{position:"top-right"}))}P(rm,"ApolloProvider");export{rm as ApolloProvider,ru as GRAPHQL_URI_DEFAULT};