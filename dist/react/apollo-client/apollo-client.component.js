function r(r,e){if(e==null||e>r.length)e=r.length;for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function e(r){if(Array.isArray(r))return r}function t(e){if(Array.isArray(e))return r(e)}function n(r){if(r===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return r}function o(r,e,t){e=c(e);return h(r,S()?Reflect.construct(e,t||[],c(r).constructor):e.apply(r,t))}function a(r,e){if(!(r instanceof e)){throw new TypeError("Cannot call a class as a function")}}function l(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(r,n.key,n)}}function i(r,e,t){if(e)l(r.prototype,e);if(t)l(r,t);return r}function u(r,e,t){if(e in r){Object.defineProperty(r,e,{value:t,enumerable:true,configurable:true,writable:true})}else{r[e]=t}return r}function c(r){c=Object.setPrototypeOf?Object.getPrototypeOf:function r(r){return r.__proto__||Object.getPrototypeOf(r)};return c(r)}function s(r,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:true,configurable:true}});if(e)g(r,e)}function f(r,e){if(e!=null&&typeof Symbol!=="undefined"&&e[Symbol.hasInstance]){return!!e[Symbol.hasInstance](r)}else{return r instanceof e}}function p(r){if(typeof Symbol!=="undefined"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function m(r,e){var t=r==null?null:typeof Symbol!=="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(t==null)return;var n=[];var o=true;var a=false;var l,i;try{for(t=t.call(r);!(o=(l=t.next()).done);o=true){n.push(l.value);if(e&&n.length===e)break}}catch(r){a=true;i=r}finally{try{if(!o&&t["return"]!=null)t["return"]()}finally{if(a)throw i}}return n}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};var n=Object.keys(t);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))}n.forEach(function(e){u(r,e,t[e])})}return r}function b(r,e){if(r==null)return{};var t=E(r,e);var n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(o=0;o<a.length;o++){n=a[o];if(e.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(r,n))continue;t[n]=r[n]}}return t}function E(r,e){if(r==null)return{};var t={};var n=Object.keys(r);var o,a;for(a=0;a<n.length;a++){o=n[a];if(e.indexOf(o)>=0)continue;t[o]=r[o]}return t}function h(r,e){if(e&&(O(e)==="object"||typeof e==="function")){return e}return n(r)}function g(r,e){g=Object.setPrototypeOf||function r(r,e){r.__proto__=e;return r};return g(r,e)}function w(r,t){return e(r)||m(r,t)||A(r,t)||v()}function k(r){return t(r)||p(r)||A(r)||d()}function O(r){"@swc/helpers - typeof";return r&&typeof Symbol!=="undefined"&&r.constructor===Symbol?"symbol":typeof r}function A(e,t){if(!e)return;if(typeof e==="string")return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}function S(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(r){}return(S=function(){return!!r})()}var j=Object.defineProperty;var L=function(r,e,t){return e in r?j(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t};var P=function(r,e){return j(r,"name",{value:e,configurable:!0})};var C=function(r,e,t){return L(r,(typeof e==="undefined"?"undefined":O(e))!="symbol"?e+"":e,t)};import{ApolloClient as x,ApolloError as N,ApolloLink as I,ApolloProvider as _,from as U,HttpLink as T,InMemoryCache as Q,split as R}from"@apollo/client";import{onError as D}from"@apollo/client/link/error";import{removeTypenameFromVariables as G}from"@apollo/client/link/remove-typename";import{GraphQLWsLink as M}from"@apollo/client/link/subscriptions";import{getMainDefinition as F}from"@apollo/client/utilities";import{createClient as q}from"graphql-ws";import J,{useMemo as B}from"react";import{FaInfo as H}from"react-icons/fa6";import W,{use as V}from"react";import{FaRepeat as $}from"react-icons/fa6";import{createContext as z}from"react";var K=z(void 0);import X from"../apollo-error/apollo-error.module.scss";function Y(){var r=V(K),e=r===null||r===void 0?void 0:r.error;if(!e)return null;var t=P(function(r,e){return(e===null||e===void 0?void 0:e.length)?W.createElement("div",null,W.createElement("strong",null,r,":"),W.createElement("ul",null,e.map(function(r){return W.createElement("li",{key:r.message},r.message)}))):null},"renderErrorList");return W.createElement("div",{className:X["modal-backdrop"]},W.createElement("div",{className:X["modal-content"]},W.createElement("button",{type:"button",className:X["btn-close"],onClick:r.hideError},"✕"),W.createElement("div",{className:X["error-title"]},W.createElement("button",{type:"button",className:X["btn-retry"],onClick:P(function(){return window.location.reload()},"onClick")},W.createElement($,null))," ",e.message),W.createElement("div",{className:X["error-details"]},e.networkError&&W.createElement("pre",{className:"network"},W.createElement("strong",null,"Network Error:")," ",e.networkError.message),t("GraphQL Errors",k(e.graphQLErrors)),t("Protocol Errors",k(e.protocolErrors)),t("Client Errors",k(e.clientErrors)),e.extraInfo&&W.createElement("pre",{className:"extra"},W.createElement("strong",null,"Extra Info:")," ",JSON.stringify(e.extraInfo,null,4)))))}P(Y,"ApolloError");import{use as Z}from"react";import rr,{useEffect as re,useMemo as rt,useState as rn}from"react";var ro=null;function ra(r){ro=r}P(ra,"setGlobalApolloErrorCallback");function rl(r){ro===null||ro===void 0?void 0:ro(r)}P(rl,"showGlobalApolloError");function ri(r){var e=r.children;var t=w(rn(null),2),n=t[0],o=t[1];re(function(){ra(o)},[]);var a=rt(function(){return{error:n,showError:o,hideError:P(function(){return o(null)},"hideError")}},[n]);return rr.createElement(K,{value:a},e)}P(ri,"ApolloErrorProvider");import{consola as ru}from"consola/browser";var rc={silent:ru.silent,level:ru.level,fatal:ru.fatal,error:ru.error,warn:ru.warn,log:ru.log,info:ru.info,success:ru.success,ready:ru.ready,start:ru.start,box:ru.box,debug:ru.debug,trace:ru.trace,verbose:ru.verbose};import{toast as rs,Toaster as rf}from"react-hot-toast";var rp="/graphql";var rm,rv=(rm=/*#__PURE__*/function(r){"use strict";s(e,r);function e(){a(this,e);var r;r=o(this,e,arguments);C(r,"count",0);return r}i(e,[{key:"request",value:function r(r,e){var t=this;var n=Date.now();return this.count+=1,e(r).map(function(e){var o=Date.now()-n,a=r.operationName||"Unnamed";return rc.info("[Apollo] #".concat(t.count,": ").concat(a," (").concat(o,"ms)")),e})}}]);return e}(I),P(rm,"DevLoggerLink"),rm);function rd(r){var e=r.uri,t=r.wsUrl,n=r.customLinks,o=new rv,a=D(function(r){var e=r.graphQLErrors,t=r.networkError,n=r.protocolErrors,o=r.operation;var a=(o===null||o===void 0?void 0:o.operationName)||"Unknown";if(e&&e.forEach(function(r){var e=r.message,t=r.locations,n=r.path;rc.error("[GraphQL error] ".concat(a,": ").concat(e,", Location: ").concat(JSON.stringify(t,null,4),", Path: ").concat(n))}),n&&n.forEach(function(r){var e=r.message,t=r.extensions;rc.error("[Protocol error]: ".concat(e,", Extensions: ").concat(JSON.stringify(t,null,4)))}),t&&rc.error("[Network error]: ".concat(t)),e||n||t){var l,i;var u=(e===null||e===void 0?void 0:(l=e[0])===null||l===void 0?void 0:l.message)||(n===null||n===void 0?void 0:(i=n[0])===null||i===void 0?void 0:i.message)||(t===null||t===void 0?void 0:t.message)||"Unexpected error",c=new N({graphQLErrors:e||[],protocolErrors:n||[],clientErrors:[],networkError:t||null,errorMessage:u,extraInfo:{operation:o}});rs.error(function(r){return J.createElement(J.Fragment,null,u,"\xa0",J.createElement(H,{cursor:"pointer",onClick:P(function(){setTimeout(function(){rl(c)},0),rs.dismiss(r.id)},"onClick")}))})}}),l=G();e||rc.warn('[Apollo] No GraphQL URI provided — using "'.concat(rp,'" as default'));var i=new T({uri:e!==null&&e!==void 0?e:rp,credentials:"include"}),u=t?new M(q({url:t})):I.empty(),c=f(u,I)?R(function(r){var e=r.query;var t=F(e);return t.kind==="OperationDefinition"&&t.operation==="subscription"},u,i):i;return c===i&&t&&rc.warn("[Apollo] WS URL is set, but subscriptions fallback to HTTP. Check your wsLink config."),[o,a,l].concat(k(n!==null&&n!==void 0?n:[]),[c])}P(rd,"createApolloLinks");function ry(r){var e=r.isNextJS,t=r.options,n=r.children,o=r.client,a=r.provider,l=r.cache;var i=t||{},u=i.uri,c=i.wsUrl,s=i.customLinks,p=b(i,["uri","wsUrl","customLinks"]),m=o!==null&&o!==void 0?o:x;if(typeof m!="function")throw new TypeError("Invalid ApolloClient provided. Ensure CustomClient is a class.");var v=a||_,d=B(function(){return U(rd({uri:u!==null&&u!==void 0?u:rp,wsUrl:c!==null&&c!==void 0?c:"",customLinks:s!==null&&s!==void 0?s:[]}))},[u,c,s]),E=B(function(){return f(l,Q)?l:new Q},[l]),h=B(function(){return new m(y({link:d,cache:E},p))},[m,d,E,p]),g=e?J.createElement(v,{makeClient:P(function(){return h},"makeClient")},n):J.createElement(v,{client:h},n);return J.createElement(J.Fragment,null,J.createElement(ri,null,g,J.createElement(Y,null)),J.createElement(rf,{position:"top-right"}))}P(ry,"ApolloProvider");export{ry as ApolloProvider};