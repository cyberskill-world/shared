function r(r,e){if(e==null||e>r.length)e=r.length;for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function e(r){if(Array.isArray(r))return r}function t(e){if(Array.isArray(e))return r(e)}function n(r){if(r===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return r}function o(r,e,t,n,o,a,i){try{var s=r[a](i);var c=s.value}catch(r){t(r);return}if(s.done){e(c)}else{Promise.resolve(c).then(n,o)}}function a(r){return function(){var e=this,t=arguments;return new Promise(function(n,a){var i=r.apply(e,t);function s(r){o(i,n,a,s,c,"next",r)}function c(r){o(i,n,a,s,c,"throw",r)}s(undefined)})}}function i(r,e,t){e=f(e);return O(r,j()?Reflect.construct(e,t||[],f(r).constructor):e.apply(r,t))}function s(r,e){if(!(r instanceof e)){throw new TypeError("Cannot call a class as a function")}}function c(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(r,n.key,n)}}function u(r,e,t){if(e)c(r.prototype,e);if(t)c(r,t);return r}function l(r,e,t){if(e in r){Object.defineProperty(r,e,{value:t,enumerable:true,configurable:true,writable:true})}else{r[e]=t}return r}function f(r){f=Object.setPrototypeOf?Object.getPrototypeOf:function r(r){return r.__proto__||Object.getPrototypeOf(r)};return f(r)}function p(r,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:true,configurable:true}});if(e)k(r,e)}function d(r,e){if(e!=null&&typeof Symbol!=="undefined"&&e[Symbol.hasInstance]){return!!e[Symbol.hasInstance](r)}else{return r instanceof e}}function m(r){if(typeof Symbol!=="undefined"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function v(r,e){var t=r==null?null:typeof Symbol!=="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(t==null)return;var n=[];var o=true;var a=false;var i,s;try{for(t=t.call(r);!(o=(i=t.next()).done);o=true){n.push(i.value);if(e&&n.length===e)break}}catch(r){a=true;s=r}finally{try{if(!o&&t["return"]!=null)t["return"]()}finally{if(a)throw s}}return n}function h(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};var n=Object.keys(t);if(typeof Object.getOwnPropertySymbols==="function"){n=n.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))}n.forEach(function(e){l(r,e,t[e])})}return r}function b(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);if(e){n=n.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})}t.push.apply(t,n)}return t}function w(r,e){e=e!=null?e:{};if(Object.getOwnPropertyDescriptors){Object.defineProperties(r,Object.getOwnPropertyDescriptors(e))}else{b(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})}return r}function E(r,e){if(r==null)return{};var t=I(r,e);var n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(o=0;o<a.length;o++){n=a[o];if(e.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(r,n))continue;t[n]=r[n]}}return t}function I(r,e){if(r==null)return{};var t={};var n=Object.keys(r);var o,a;for(a=0;a<n.length;a++){o=n[a];if(e.indexOf(o)>=0)continue;t[o]=r[o]}return t}function O(r,e){if(e&&(_(e)==="object"||typeof e==="function")){return e}return n(r)}function k(r,e){k=Object.setPrototypeOf||function r(r,e){r.__proto__=e;return r};return k(r,e)}function S(r,t){return e(r)||v(r,t)||N(r,t)||h()}function x(r){return t(r)||m(r)||N(r)||g()}function _(r){"@swc/helpers - typeof";return r&&typeof Symbol!=="undefined"&&r.constructor===Symbol?"symbol":typeof r}function N(e,t){if(!e)return;if(typeof e==="string")return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}function j(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(r){}return(j=function(){return!!r})()}function C(r,e){var t,n,o,a,i={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),"throw":s(1),"return":s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(r){return function(e){return c([r,e])}}function c(a){if(t)throw new TypeError("Generator is already executing.");while(i)try{if(t=1,n&&(o=a[0]&2?n["return"]:a[0]?n["throw"]||((o=n["return"])&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;if(n=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:i.label++;return{value:a[1],done:false};case 5:i.label++;n=a[1];a=[0];continue;case 7:a=i.ops.pop();i.trys.pop();continue;default:if(!(o=i.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){i=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(a[0]===6&&i.label<o[1]){i.label=o[1];o=a;break}if(o&&i.label<o[2]){i.label=o[2];i.ops.push(a);break}if(o[2])i.ops.pop();i.trys.pop();continue}a=e.call(r,i)}catch(r){a=[6,r];n=0}finally{t=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}}import{ApolloClient as T,ApolloError as L,ApolloLink as P,ApolloProvider as A,from as G,HttpLink as R,InMemoryCache as D,split as U}from"@apollo/client";import{onError as F}from"@apollo/client/link/error";import{removeTypenameFromVariables as M}from"@apollo/client/link/remove-typename";import{GraphQLWsLink as J}from"@apollo/client/link/subscriptions";import{getMainDefinition as K}from"@apollo/client/utilities";import{createClient as W}from"graphql-ws";import{useMemo as Q}from"react";import{FaInfo as z}from"react-icons/fa6";import{use as B}from"react";import{FaRepeat as H}from"react-icons/fa6";import{createContext as Y}from"react";var q=Y(void 0);import $ from"./apollo-error/apollo-error.module.scss";import{jsx as V,jsxs as X}from"react/jsx-runtime";function Z(){var r=B(q),e=r===null||r===void 0?void 0:r.error;if(!e)return null;var t=function(r,e){return(e===null||e===void 0?void 0:e.length)?X("div",{children:[X("strong",{children:[r,":"]}),V("ul",{children:e.map(function(r){return V("li",{children:r.message},r.message)})})]}):null};return V("div",{className:$["modal-backdrop"],children:X("div",{className:$["modal-content"],children:[V("button",{type:"button",className:$["btn-close"],onClick:r.hideError,children:"✕"}),X("div",{className:$["error-title"],children:[V("button",{type:"button",className:$["btn-retry"],onClick:function(){return window.location.reload()},children:V(H,{})})," ",e.message]}),X("div",{className:$["error-details"],children:[e.networkError&&X("pre",{className:"network",children:[V("strong",{children:"Network Error:"})," ",e.networkError.message]}),t("GraphQL Errors",x(e.graphQLErrors)),t("Protocol Errors",x(e.protocolErrors)),t("Client Errors",x(e.clientErrors)),e.extraInfo&&X("pre",{className:"extra",children:[V("strong",{children:"Extra Info:"})," ",JSON.stringify(e.extraInfo,null,4)]})]})]})})}import{use as rr}from"react";function re(){var r=rr(q);if(!r)throw new Error("useApolloError must be used within ApolloErrorProvider");return r}import{useEffect as rt,useMemo as rn,useState as ro}from"react";import{jsx as ra}from"react/jsx-runtime";var ri=null;function rs(r){ri===null||ri===void 0?void 0:ri(r)}function rc(r){var e=r.children;var t=S(ro(null),2),n=t[0],o=t[1];rt(function(){ri=o},[]);var a=rn(function(){return{error:n,showError:o,hideError:function(){return o(null)}}},[n]);return ra(q,{value:a,children:e})}import{consola as ru}from"consola/browser";var rl={silent:ru.silent,level:ru.level,fatal:ru.fatal,error:ru.error,warn:ru.warn,log:ru.log,info:ru.info,success:ru.success,ready:ru.ready,start:ru.start,box:ru.box,debug:ru.debug,trace:ru.trace,verbose:ru.verbose};import{toast as rf,Toaster as rp}from"react-hot-toast";var rd="/graphql";import{Fragment as rm,jsx as rv,jsxs as rh}from"react/jsx-runtime";var rg=/*#__PURE__*/function(r){"use strict";p(e,r);function e(){s(this,e);var r;r=i(this,e,arguments);r.count=0;return r}u(e,[{key:"request",value:function r(r,e){var t=this;var n=Date.now();return this.count+=1,e(r).map(function(e){var o=Date.now()-n,a=r.operationName||"Unnamed";return rl.info("[Apollo] #".concat(t.count,": ").concat(a," (").concat(o,"ms)")),e})}}]);return e}(P);function ry(r){var e=r||{},t=e.uri,n=e.wsUrl,o=e.customLinks,a=new rg,i=F(function(r){var e=r.graphQLErrors,t=r.networkError,n=r.protocolErrors,o=r.operation;var a=(o===null||o===void 0?void 0:o.operationName)||"Unknown";if(e&&e.forEach(function(r){var e=r.message,t=r.locations,n=r.path;rl.error("[GraphQL error] ".concat(a,": ").concat(e,", Location: ").concat(JSON.stringify(t),", Path: ").concat(n))}),n&&n.forEach(function(r){var e=r.message,t=r.extensions;rl.error("[Protocol error]: ".concat(e,", Extensions: ").concat(JSON.stringify(t)))}),t&&rl.error("[Network error]: ".concat(t)),e||n||t){var i,s;var c=(e===null||e===void 0?void 0:(i=e[0])===null||i===void 0?void 0:i.message)||(n===null||n===void 0?void 0:(s=n[0])===null||s===void 0?void 0:s.message)||(t===null||t===void 0?void 0:t.message)||"Unexpected error",u=new L({graphQLErrors:e||[],protocolErrors:n||[],clientErrors:[],networkError:t||null,errorMessage:c,extraInfo:{operation:o}});rf.error(function(r){return rh(rm,{children:[c,"\xa0",rv(z,{cursor:"pointer",onClick:function(){setTimeout(function(){rs(u)},0),rf.dismiss(r.id)}})]})})}}),s=M();t||rl.warn('[Apollo] No GraphQL URI provided — using "'.concat(rd,'" as default'));var c=new R({uri:t!==null&&t!==void 0?t:rd,credentials:"include"}),u=n?new J(W({url:n})):P.empty(),l=d(u,P)?U(function(r){var e=r.query;var t=K(e);return t.kind==="OperationDefinition"&&t.operation==="subscription"},u,c):c;return l===c&&n&&rl.warn("[Apollo] WS URL is set, but subscriptions fallback to HTTP. Check your wsLink config."),[a,i,s].concat(x(o!==null&&o!==void 0?o:[]),[l])}function rb(r){var e=r.isNextJS,t=r.options,n=r.children,o=r.client,a=r.provider,i=r.cache;var s=t||{},c=s.uri,u=s.wsUrl,l=s.customLinks,f=E(s,["uri","wsUrl","customLinks"]),p=o!==null&&o!==void 0?o:T;if(typeof p!="function")throw new TypeError("Invalid ApolloClient provided. Ensure CustomClient is a class.");var m=a||A,v=Q(function(){return G(ry({uri:c,wsUrl:u,customLinks:l}))},[c,u,l]),h=Q(function(){return d(i,D)?i:new D},[i]),g=Q(function(){return new p(y({link:v,cache:h},f))},[p,v,h,f]);return rh(rm,{children:[rh(rc,{children:[e?rv(m,{makeClient:function(){return g},children:n}):rv(m,{client:g,children:n}),rv(Z,{})]}),rv(rp,{position:"top-right"})]})}import{useTranslation as rw}from"react-i18next";var rE=rw;import rI from"i18next";import{initReactI18next as rO}from"react-i18next";function rk(r){return rI.use(rO).init(r)}import rS from"classnames";import rx from"./loading/loading.module.scss";import{jsx as r_,jsxs as rN}from"react/jsx-runtime";function rj(r){var e=r.full,t=e===void 0?!1:e,n=r.block,o=n===void 0?!1:n,a=r.className,i=a===void 0?"":a,s=r.message,c=s===void 0?"Loading":s,u=E(r,["full","block","className","message"]);function l(){return rN("div",w(y({className:rx.container},u),{children:[r_("div",{className:rx.ring}),r_("div",{className:rx.ring}),r_("div",{className:rx.ring}),r_("div",{className:rx.ring}),c&&r_("div",{className:rx.message,children:c})]}))}return t?r_("div",{className:rS(rx.fullscreen,i),children:l()}):o?r_("div",{className:rS(rx.block,i),children:l()}):l()}import{createContext as rC}from"react";var rT=rC(void 0);import{use as rL}from"react";function rP(){var r=rL(rT);if(!r)throw new Error("useLoading must be used within a LoadingProvider");return r}import{useCallback as rA,useMemo as rG,useState as rR}from"react";import{jsx as rD}from"react/jsx-runtime";function rU(r){var e=r.children;var t=S(rR(!1),2),n=t[0],o=t[1],a=S(rR(!1),2),i=a[0],s=a[1],c=rA(function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;o(!0),s(r)},[]),u=rA(function(){o(!1),s(!1)},[]),l=rG(function(){return{isLoading:n,isGlobalLoading:i,showLoading:c,hideLoading:u}},[n,i,c,u]);return rD(rT,{value:l,children:n?rD(rj,{full:i}):e})}import{createContext as rF}from"react";var rM=rF(void 0);import{NextIntlClientProvider as rJ}from"next-intl";import{useTranslations as rK}from"next-intl";import{use as rW}from"react";function rQ(){var r=rW(rM);if(!r)throw new Error("useNextIntl must be used within a NextIntlProvider");return r}var rz=rK;import{jsx as rB}from"react/jsx-runtime";function rH(r){var e=function(e){var t;var n=rQ(),o=n.currentLanguage,a=e.messages,i=e.languages,s="en",c=a[(o===null||o===void 0?void 0:o.value)||s],u=(t=i.find(function(r){return r.value===(o===null||o===void 0?void 0:o.value)}))===null||t===void 0?void 0:t.timezone;return a?rB(rJ,{locale:(o===null||o===void 0?void 0:o.value)||s,messages:c,timeZone:u,children:rB(r,y({},e))}):(rl.warn("Missing messages for language: ".concat((o===null||o===void 0?void 0:o.value)||s)),null)};return e.displayName="withNextIntl(".concat(r.displayName||r.name||"Component",")"),e}import{useMemo as rY}from"react";import{useCallback as rq,useEffect as r$,useState as rV}from"react";var rX={serialize:function(r){return JSON.stringify(r,function(r,e){return d(e,Date)?{__type:"Date",value:e.toISOString()}:e})},deserialize:function(r){return JSON.parse(r,function(r,e){return(e===null||e===void 0?void 0:e.__type)==="Date"?new Date(e.value):e})}};import rZ from"localforage";var r0={get:function r(r){return a(function(){var e;return C(this,function(t){switch(t.label){case 0:t.trys.push([0,2,,3]);return[4,rZ.getItem(r)];case 1:return[2,t.sent()];case 2:e=t.sent();return[2,(rl.error('[Storage:get] Error getting key "'.concat(r,'":'),e),null)];case 3:return[2]}})})()},set:function r(r,e){return a(function(){var t;return C(this,function(n){switch(n.label){case 0:n.trys.push([0,2,,3]);return[4,rZ.setItem(r,e)];case 1:n.sent();return[3,3];case 2:t=n.sent();rl.error('[Storage:set] Error setting key "'.concat(r,'":'),t);return[3,3];case 3:return[2]}})})()},remove:function r(r){return a(function(){var e;return C(this,function(t){switch(t.label){case 0:t.trys.push([0,2,,3]);return[4,rZ.removeItem(r)];case 1:t.sent();return[3,3];case 2:e=t.sent();rl.error('[Storage:remove] Error removing key "'.concat(r,'":'),e);return[3,3];case 3:return[2]}})})()},keys:function r(){return a(function(){var r,e;return C(this,function(t){switch(t.label){case 0:t.trys.push([0,2,,3]);return[4,rZ.keys()];case 1:return[2,(r=t.sent())!==null&&r!==void 0?r:[]];case 2:e=t.sent();return[2,(rl.error("[Storage:keys] Error getting keys:",e),[])];case 3:return[2]}})})()}};function r1(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rX;var n=S(rV(e),2),o=n[0],i=n[1],s=S(rV(!1),2),c=s[0],u=s[1];r$(function(){var n=!0;return a(function(){var o,a,s,c;return C(this,function(l){switch(l.label){case 0:l.trys.push([0,6,7,8]);return[4,r0.get(r)];case 1:o=l.sent();if(!n)return[3,5];if(!(o!==null))return[3,2];a=t.deserialize(o);i(a);return[3,5];case 2:if(!(e!==void 0))return[3,4];s=t.serialize(e);return[4,r0.set(r,s)];case 3:l.sent(),i(e);return[3,5];case 4:i(void 0);l.label=5;case 5:return[3,8];case 6:c=l.sent();rl.error('Error loading value for key "'.concat(r,'":'),c),n&&i(e);return[3,8];case 7:n&&u(!0);return[7];case 8:return[2]}})})(),function(){n=!1,u(!1)}},[r,e,t]),r$(function(){if(!c)return;a(function(){var e,n;return C(this,function(a){switch(a.label){case 0:a.trys.push([0,3,,4]);if(!(o!==void 0))return[3,2];e=t.serialize(o);return[4,r0.set(r,e)];case 1:a.sent();a.label=2;case 2:return[3,4];case 3:n=a.sent();rl.error('Error saving value for key "'.concat(r,'":'),n);return[3,4];case 4:return[2]}})})()},[o,r,t,c]);var l=rq(function(r){i(function(e){return typeof r=="function"?r(e):r})},[]),f=rq(/*#__PURE__*/a(function(){var e;return C(this,function(t){switch(t.label){case 0:t.trys.push([0,2,,3]);return[4,r0.remove(r)];case 1:t.sent(),i(void 0);return[3,3];case 2:e=t.sent();rl.error('Error removing key "'.concat(r,'":'),e);return[3,3];case 3:return[2]}})}),[r]);return{value:o,set:l,remove:f}}import{Fragment as r2,jsx as r3}from"react/jsx-runtime";function r4(r){var e=r.children;return r3(r2,{children:e})}var r8=rH(r4);function r5(r){var e=r.children,t=r.languages,n=r.messages;var o;var a=r1("lang",(o=t===null||t===void 0?void 0:t[0])!==null&&o!==void 0?o:{}),i=a.value,s=a.set,c=rY(function(){return{languages:t,currentLanguage:i,setCurrentLanguage:s}},[t,s,i]);return r3(rM,{value:c,children:r3(r8,{languages:t,messages:n,children:e})})}import r6 from"@vitejs/plugin-react-swc";import{defineConfig as r7}from"vitest/config";function r9(r){return r7(y({plugins:[r6()],test:{include:["**/*.test.e2e.?(c|m)[jt]s?(x)"],browser:{enabled:!0,provider:"playwright",instances:[{browser:"chromium"},{browser:"firefox"},{browser:"webkit"}]}}},r))}import er from"@vitejs/plugin-react-swc";import{defineConfig as ee}from"vitest/config";import et from"node:process";import{exec as en}from"node:child_process";import eo from"node:process";import*as ea from"node:util";import ei from"node:process";var es=ei.env.DEBUG==="true";import ec from"chalk";import eu from"consola";import{GraphQLError as el}from"graphql";es||(eu.level=4);function ef(r){var e=ec[r];return typeof e=="function"?e:ec.green}var ep={silent:eu.silent,level:eu.level,fatal:eu.fatal,error:eu.error,warn:eu.warn,log:eu.log,info:eu.info,success:eu.success,ready:eu.ready,start:eu.start,box:eu.box,debug:eu.debug,trace:eu.trace,verbose:eu.verbose,printBoxedLog:function r(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"red";if(!(e===null||e===void 0?void 0:e.length)){eu.box(ec.green(r));return}e.forEach(function(r){var e=r.file,n=r.position,o=r.rule,a=r.message;eu.log("".concat(ec.gray("File:")," ").concat(ec.blue("".concat(e).concat(n?":".concat(n):"")))),o&&eu.log("   ".concat(ef(t)("Rule:")," ").concat(o)),eu.log("   ".concat(ef(t)("Message:")," ").concat(a))}),eu.box(ef(t)("".concat(r," : ").concat(e.length))),eu.log(ec.gray("─".repeat(40)))}};var ed={isCurrentProject:!1,installedPath:"",file:{},isUpToDate:!1};import em from"node-fetch";import*as ev from"node:fs";function eh(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++){e[t]=arguments[t]}return e.every(function(r){return ev.existsSync(r)})}function eg(r,e){var t=ev.readFileSync(r,"utf-8");if(e===null||e===void 0?void 0:e.asJson)try{var n=JSON.parse(t);if((typeof n==="undefined"?"undefined":_(n))=="object"&&n!==null)return n;throw new Error("Parsed JSON is not an object or array")}catch(e){throw new Error("Failed to parse JSON from file: ".concat(r))}return t}function ey(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var n=t.isJson,o=n===void 0?!1:n,a=o&&(typeof e==="undefined"?"undefined":_(e))=="object"?JSON.stringify(e,null,4):String(e);ev.writeFileSync(r,a,"utf-8")}function eb(r){var e=e$(eV,e2);if(!eh(e))return!1;try{var t=eg(e,{asJson:!0}),n=t.name,o=t.dependencies,a=o===void 0?{}:o,i=t.devDependencies,s=i===void 0?{}:i,c=n===r,u=r in a,l=r in s;return c||u||l?{path:e,file:t,isCurrentProject:c,isDepend:u,isDevDepend:l}:!1}catch(r){return ep.warn("Failed to read package.json: ".concat(r.message)),!1}}function ew(r){return eE.apply(this,arguments)}function eE(){eE=a(function(r){var e,t,n,o;return C(this,function(a){switch(a.label){case 0:a.trys.push([0,3,,4]);return[4,em("https://registry.npmjs.org/".concat(r,"/latest"))];case 1:e=a.sent();if(!e.ok)throw new Error("Failed to fetch latest version: ".concat(e.status," ").concat(e.statusText));return[4,e.json()];case 2:t=a.sent(),n=t.version;return[2,n];case 3:o=a.sent();throw ep.error('Failed to fetch version for "'.concat(r,'": ').concat(o.message)),o;case 4:return[2]}})});return eE.apply(this,arguments)}function eI(r,e){return eO.apply(this,arguments)}function eO(){eO=a(function(r,e){var t,n,o,a,i,s,c,u,l,f,p,d,m,v,h,g,b,w,E,I,O;return C(this,function(k){switch(k.label){case 0:k.trys.push([0,4,,5]);t=eb(r);if(!t)return[2,y({},ed)];c=t.path,u=t.file,l=t.isCurrentProject,f=t.isDepend,p=t.isDevDepend,d=(n=u.dependencies)!==null&&n!==void 0?n:{},m=(o=u.devDependencies)!==null&&o!==void 0?o:{},v=l?(a=u.version)!==null&&a!==void 0?a:"0.0.0":f?(i=d[r])!==null&&i!==void 0?i:"0.0.0":p?(s=m[r])!==null&&s!==void 0?s:"0.0.0":"0.0.0";if(!l)return[3,1];b=v;return[3,3];case 1:return[4,ew(r)];case 2:b=k.sent();k.label=3;case 3:h=b,g=l||v===h;if(!g&&(e===null||e===void 0?void 0:e.update)){;E=f?"dependencies":p?"devDependencies":null;E&&((w=u[E])===null||w===void 0?void 0:w[r])!==h&&(u[E]=(I=u[E])!==null&&I!==void 0?I:{},u[E][r]=h,ey(c,u,{isJson:!0}),ep.info('Updated "'.concat(r,'" to version ').concat(h)))}return[2,{isCurrentProject:l,installedPath:c,file:u,isUpToDate:g}];case 4:O=k.sent();return[2,(ep.error('Error checking package "'.concat(r,'": ').concat(O.message)),y({},ed))];case 5:return[2]}})});return eO.apply(this,arguments)}function ek(){return eS.apply(this,arguments)}function eS(){eS=a(function(){var r,e,t,n,o,a,i,s,c,u,l,f;return C(this,function(p){switch(p.label){case 0:r=[{command:function(){return tN.pnpmInstallStandard()},message:"Installing dependencies (standard)"},{command:function(){return tN.pnpmInstallLegacy()},message:"Retrying with legacy peer dependencies"},{command:function(){return tN.pnpmInstallForce()},message:"Retrying with force install"}];e=true,t=false,n=undefined;p.label=1;case 1:p.trys.push([1,9,10,11]);o=r[Symbol.iterator]();p.label=2;case 2:if(!!(e=(a=o.next()).done))return[3,8];i=a.value,s=i.command,c=i.message;p.label=3;case 3:p.trys.push([3,6,,7]);return[4,s()];case 4:u=p.sent();return[4,eB("".concat(c," using: ").concat(u),u)];case 5:p.sent();return[2];case 6:l=p.sent();ep.warn("Installation attempt failed: ".concat(c)),ep.error("Details: ".concat(l.message));return[3,7];case 7:e=true;return[3,2];case 8:return[3,11];case 9:f=p.sent();t=true;n=f;return[3,11];case 10:try{if(!e&&o.return!=null){o.return()}}finally{if(t){throw n}}return[7];case 11:throw new Error("All dependency installation strategies failed.")}})});return eS.apply(this,arguments)}function ex(r,e){return e_.apply(this,arguments)}function e_(){e_=a(function(r,e){var t,n,o,a,i,s,c,u,l,f,p;return C(this,function(d){switch(d.label){case 0:if(!eh(tk.PACKAGE_JSON)){ep.error("package.json not found. Aborting setup.");return[2]}d.label=1;case 1:d.trys.push([1,13,,14]);t=x(new Set(r)).sort();return[4,Promise.all(t.map(function(r){return eI(r,{update:e===null||e===void 0?void 0:e.update})}))];case 2:n=d.sent().every(function(r){return r.isUpToDate});if(n)return[3,4];return[4,ek()];case 3:n=d.sent();d.label=4;case 4:n;a=true,i=false,s=undefined;d.label=5;case 5:d.trys.push([5,10,11,12]);c=((o=e===null||e===void 0?void 0:e.postInstallActions)!==null&&o!==void 0?o:[])[Symbol.iterator]();d.label=6;case 6:if(!!(a=(u=c.next()).done))return[3,9];l=u.value;return[4,l()];case 7:d.sent();d.label=8;case 8:a=true;return[3,6];case 9:return[3,12];case 10:f=d.sent();i=true;s=f;return[3,12];case 11:try{if(!a&&c.return!=null){c.return()}}finally{if(i){throw s}}return[7];case 12:ep.success('"'.concat(r.join(", "),'" setup completed.'));return[3,14];case 13:p=d.sent();throw ep.error('Failed to setup "'.concat(r.join(", "),'": ').concat(p.message)),p;case 14:return[2]}})});return e_.apply(this,arguments)}import eN from"node-persist";import ej from"node:os";import eC from"node:process";function eT(){return eC.env.CYBERSKILL_STORAGE_DIR||e$(ej.homedir(),eZ)}function eL(){return eP.apply(this,arguments)}function eP(){eP=a(function(){var r;return C(this,function(e){switch(e.label){case 0:r=eN.defaultInstance;if(r)return[3,2];return[4,eN.init({dir:eT(),stringify:JSON.stringify,parse:JSON.parse,encoding:"utf8",logging:!1,forgiveParseErrors:!0})];case 1:r=e.sent();e.label=2;case 2:r;return[2]}})});return eP.apply(this,arguments)}var eA={get:function r(r){return a(function(){var e,t;return C(this,function(n){switch(n.label){case 0:n.trys.push([0,3,,4]);return[4,eL()];case 1:n.sent();return[4,eN.getItem(r)];case 2:return[2,(e=n.sent())!==null&&e!==void 0?e:null];case 3:t=n.sent();return[2,(ep.error('[Storage:get] Error getting key "'.concat(r,'":'),t),null)];case 4:return[2]}})})()},set:function r(r,e){return a(function(){var t;return C(this,function(n){switch(n.label){case 0:n.trys.push([0,3,,4]);return[4,eL()];case 1:n.sent();return[4,eN.setItem(r,e)];case 2:n.sent();return[3,4];case 3:t=n.sent();ep.error('[Storage:set] Error setting key "'.concat(r,'":'),t);return[3,4];case 4:return[2]}})})()},remove:function r(r){return a(function(){var e;return C(this,function(t){switch(t.label){case 0:t.trys.push([0,3,,4]);return[4,eL()];case 1:t.sent();return[4,eN.removeItem(r)];case 2:t.sent();return[3,4];case 3:e=t.sent();ep.error('[Storage:remove] Error removing key "'.concat(r,'":'),e);return[3,4];case 4:return[2]}})})()},keys:function r(){return a(function(){var r,e;return C(this,function(t){switch(t.label){case 0:t.trys.push([0,3,,4]);return[4,eL()];case 1:t.sent();return[4,eN.keys()];case 2:r=t.sent();return[2,Array.isArray(r)?r:(ep.warn("[Storage:keys] Invalid keys response:",r),[])];case 3:e=t.sent();return[2,(ep.error("[Storage:keys] Error getting keys:",e),[])];case 4:return[2]}})})()},getLogLink:function r(r){return a(function(){return C(this,function(e){try{return[2,"".concat(eT()," (key: ").concat(r,")")]}catch(r){return[2,(ep.error("[Storage:getLogLink] Error getting log link:",r),null)]}return[2]})})()}};var eG=ea.promisify(en);function eR(r){return"error_list:".concat(r)}function eD(r){return eU.apply(this,arguments)}function eU(){eU=a(function(r){var e,t,n;return C(this,function(o){switch(o.label){case 0:if(r.length===0)return[2];e=Date.now(),t=eR(e);o.label=1;case 1:o.trys.push([1,3,,4]);return[4,eA.set(t,{errors:r,timestamp:e})];case 2:o.sent(),setTimeout(/*#__PURE__*/a(function(){var r;return C(this,function(e){switch(e.label){case 0:return[4,eA.getLogLink(t)];case 1:r=e.sent();r&&ep.info("\uD83D\uDCC2 Open the error list manually: ".concat(r));return[2]}})}),10);return[3,4];case 3:n=o.sent();ep.error("Failed to save errors: ".concat(n.message));return[3,4];case 4:return[2]}})});return eU.apply(this,arguments)}function eF(r){var e=[],t=[],n="",o=/^\s*(\d+):(\d+)\s+(error|warning)\s+(.+?)\s+(\S+)$/,a=/^(.+?)\((\d+),(\d+)\):\s+(error|warning)\s+TS\d+:\s+(\S.+)$/,i=/^✖\s+(.*?)\s+\[(.*?)\]$/;r.split("\n").forEach(function(r){if(r.startsWith("/"))n=r.trim();else{var s=o.exec(r)||[],c=a.exec(r)||[],u=i.exec(r)||[];s.length&&n?e.push({file:n,position:"".concat(s[1],":").concat(s[2]),type:s[3]==="error"?"error":"warning",message:s[4].trim(),rule:s[5].trim()}):c.length?e.push({file:c[1],position:"".concat(c[2],":").concat(c[3]),type:c[4]==="error"?"error":"warning",message:c[5].trim()}):u.length?e.push({file:"commitlint",type:"error",message:u[1].trim(),rule:u[2].trim()}):t.push(r.trim())}}),e.length&&eD(e),es&&t.length&&(ep.warn("Unmatched lines:"),t.forEach(function(r){return ep.info("  ".concat(r))}))}function eM(r){try{var e=JSON.parse(r),t=[];e.forEach(function(r){var e=r.filePath,n=r.messages;n.forEach(function(r){var n=r.severity,o=r.line,a=r.column,i=r.ruleId,s=r.message;t.push({type:n===2?"error":"warning",file:e,position:"".concat(o,":").concat(a),rule:i,message:s})})}),t.length&&eD(t)}catch(e){eF(r)}}function eJ(r){return eK.apply(this,arguments)}function eK(){eK=a(function(r){var e,t,n,o,a,i,s,c,u;var l=arguments;return C(this,function(f){switch(f.label){case 0:e=l.length>1&&l[1]!==void 0?l[1]:eM;t=new AbortController;eo.on("SIGINT",function(){ep.warn("Process interrupted. Terminating..."),t.abort(),eo.exit()});f.label=1;case 1:f.trys.push([1,3,,4]);return[4,eG(r,{maxBuffer:0x6400000,signal:t.signal})];case 2:n=f.sent(),o=n.stdout,a=n.stderr;[o,a].forEach(function(r){return r&&e(r)});return[3,4];case 3:i=f.sent();s=i.stdout,c=i.stderr,u=i.message;[s,c].forEach(function(r){return r&&e(r)}),!c&&!s&&ep.error("Command failed: ".concat(u));return[3,4];case 4:return[2]}})});return eK.apply(this,arguments)}function eW(r){return{raw:!0,cmd:r}}function eQ(r,e){return(e===null||e===void 0?void 0:e.isRemote)?"".concat(tg," ").concat(eX," ").concat(r):(e===null||e===void 0?void 0:e.isCurrentProject)?"".concat(tg," ").concat(tm," ").concat(tt," ").concat(r):"".concat(tg," ").concat(te," ").concat(r)}function ez(r,e){return typeof r=="function"?eQ(r(e),e):(typeof r==="undefined"?"undefined":_(r))=="object"&&(r===null||r===void 0?void 0:r.raw)===!0?r.cmd:typeof r=="string"?eQ(r,e):r}function eB(r,e){return eH.apply(this,arguments)}function eH(){eH=a(function(r,e){var t;return C(this,function(n){switch(n.label){case 0:n.trys.push([0,2,,3]);ep.start("".concat(r)),es&&ep.info("→ ".concat(e));return[4,eJ(e)];case 1:n.sent(),ep.success("".concat(r," done."));return[3,3];case 2:t=n.sent();throw ep.error("".concat(r," failed: ").concat(t.message)),t;case 3:return[2]}})});return eH.apply(this,arguments)}import*as eY from"node:path";function eq(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++){e[t]=arguments[t]}var n;return(n=eY).resolve.apply(n,[eV].concat(x(e)))}function e$(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++){e[t]=arguments[t]}var n;return(n=eY).join.apply(n,x(e))}var eV=et.env.INIT_CWD||et.cwd(),eX="@cyberskill/shared",eZ=".cyberskill-storage",e0="node_modules",e1="dist",e2="package.json",e3="package-lock.json",e4="tsconfig.json",e8=".gitignore",e5=".simple-git-hooks.json",e6="pnpm-lock.yaml",e7=".git/hooks/",e9=".git/COMMIT_EDITMSG",tr=e$(eV,e0,eX,e1),te="cyberskill",tt="src/nodejs/cli/index.ts",tn="eslint",to="eslint",ta="vitest",ti="playwright",ts="vitest",tc="@commitlint/cli",tu="commitlint",tl="lint-staged",tf="lint-staged",tp="typescript",td="tsc",tm="tsx",tv="git",th="pnpm",tg="pnpm exec",ty="simple-git-hooks",tb="simple-git-hooks",tw="@eslint/config-inspector",tE="eslint-config-inspector",tI="node-modules-inspector",tO="node-modules-inspector",tk={CYBERSKILL_DIRECTORY:tr,WORKING_DIRECTORY:eV,TS_CONFIG:eq(e4),GIT_IGNORE:eq(e8),GIT_HOOK:eq(e7),GIT_COMMIT_MSG:eq(e9),SIMPLE_GIT_HOOKS_JSON:eq(e5),PACKAGE_JSON:eq(e2),PACKAGE_LOCK_JSON:eq(e3),PNPM_LOCK_YAML:eq(e6),NODE_MODULES:eq(e0),LINT_STAGED_CONFIG:eq("".concat(tr,"/configs/lint-staged/base.js")),COMMITLINT_CONFIG:eq("".concat(tr,"/configs/commitlint/base.js")),UNIT_TEST_CONFIG:eq("".concat(tr,"/react/vitest/vitest.unit.js")),UNIT_TEST_SETUP_CONFIG:eq("".concat(tr,"/react/vitest/vitest.unit.setup.js")),E2E_TEST_CONFIG:eq("".concat(tr,"/react/vitest/vitest.e2e.js"))};function tS(r){return tx.apply(this,arguments)}function tx(){tx=a(function(r){var e,t,n,o,a,i;var s=arguments;return C(this,function(c){switch(c.label){case 0:for(e=s.length,t=new Array(e>1?e-1:0),n=1;n<e;n++){t[n-1]=s[n]}o=S(t,2),a=o[0],i=o[1];switch(r){case"CLI":return[3,1];case"RAW":return[3,3]}return[3,4];case 1:return[4,ex(a.split(" "),{update:!0})];case 2:return[2,(c.sent(),ez(eW("".concat(tg," ").concat(i))))];case 3:return[2,ez(eW(a))];case 4:throw new Error("Unsupported command type");case 5:return[2]}})});return tx.apply(this,arguments)}function t_(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++){t[n-1]=arguments[n]}return /*#__PURE__*/a(function(){return C(this,function(e){return[2,tS.apply(void 0,[r].concat(x(t)))]})})}var tN={simpleGitHooks:t_("CLI",ty,tb),eslintInspect:t_("CLI",tw,tE),nodeModulesInspect:t_("CLI",tI,tO),eslintCheck:t_("CLI",tn,"".concat(to," ").concat(tk.WORKING_DIRECTORY)),eslintFix:t_("CLI",tn,"".concat(to," ").concat(tk.WORKING_DIRECTORY," --fix")),typescriptCheck:t_("CLI",tp,"".concat(td," -p ").concat(tk.TS_CONFIG," --noEmit")),configureGitHook:t_("RAW","".concat(tv," config core.hooksPath ").concat(tk.GIT_HOOK)),testUnit:t_("CLI",ta,"".concat(ts," --config ").concat(tk.UNIT_TEST_CONFIG)),testE2e:t_("CLI","".concat(ta," ").concat(ti),"".concat(ts," --config ").concat(tk.E2E_TEST_CONFIG)),commitLint:t_("CLI",tc,"".concat(tu," --edit ").concat(tk.GIT_COMMIT_MSG," --config ").concat(tk.COMMITLINT_CONFIG)),lintStaged:t_("CLI",tl,"".concat(tf," --config ").concat(tk.LINT_STAGED_CONFIG)),stageBuildDirectory:t_("RAW","".concat(tv," add ").concat(e1)),build:t_("RAW","".concat(th," run build")),pnpmInstallStandard:t_("RAW","".concat(th," install")),pnpmInstallLegacy:t_("RAW","".concat(th," install --legacy-peer-deps")),pnpmInstallForce:t_("RAW","".concat(th," install --force"))};function tj(r){return ee(y({plugins:[er()],test:{globals:!0,environment:"jsdom",pool:"vmThreads",include:["**/*.test.unit.?(c|m)[jt]s?(x)"],setupFiles:[tk.UNIT_TEST_SETUP_CONFIG]}},r))}export{Z as ApolloError,q as ApolloErrorContext,rc as ApolloErrorProvider,rb as ApolloProvider,rd as GRAPHQL_URI_DEFAULT,rj as Loading,rT as LoadingContext,rU as LoadingProvider,rM as NextIntlContext,r5 as NextIntlProvider,rp as Toaster,rk as initI18next,rl as log,rs as showGlobalApolloError,r0 as storage,rf as toast,re as useApolloError,rP as useLoading,rQ as useNextIntl,r1 as useStorage,rE as useTranslateI18next,rz as useTranslateNextIntl,r9 as vitestE2E,tj as vitestUnit,rH as withNextIntl};