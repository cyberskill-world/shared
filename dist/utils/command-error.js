function r(r,e){if(e==null||e>r.length)e=r.length;for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function e(e){if(Array.isArray(e))return r(e)}function t(r,e,t,n,s,a,o){try{var u=r[a](o);var c=u.value}catch(r){t(r);return}if(u.done){e(c)}else{Promise.resolve(c).then(n,s)}}function n(r){return function(){var e=this,n=arguments;return new Promise(function(s,a){var o=r.apply(e,n);function u(r){t(o,s,a,u,c,"next",r)}function c(r){t(o,s,a,u,c,"throw",r)}u(undefined)})}}function s(r){if(typeof Symbol!=="undefined"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(r){return e(r)||s(r)||u(r)||a()}function u(e,t){if(!e)return;if(typeof e==="string")return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}function c(r,e){var t,n,s,a,o={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]};return a={next:u(0),"throw":u(1),"return":u(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(r){return function(e){return c([r,e])}}function c(a){if(t)throw new TypeError("Generator is already executing.");while(o)try{if(t=1,n&&(s=a[0]&2?n["return"]:a[0]?n["throw"]||((s=n["return"])&&s.call(n),0):n.next)&&!(s=s.call(n,a[1])).done)return s;if(n=0,s)a=[a[0]&2,s.value];switch(a[0]){case 0:case 1:s=a;break;case 4:o.label++;return{value:a[1],done:false};case 5:o.label++;n=a[1];a=[0];continue;case 7:a=o.ops.pop();o.trys.pop();continue;default:if(!(s=o.trys,s=s.length>0&&s[s.length-1])&&(a[0]===6||a[0]===2)){o=0;continue}if(a[0]===3&&(!s||a[1]>s[0]&&a[1]<s[3])){o.label=a[1];break}if(a[0]===6&&o.label<s[1]){o.label=s[1];s=a;break}if(s&&o.label<s[2]){o.label=s[2];o.ops.push(a);break}if(s[2])o.ops.pop();o.trys.pop();continue}a=e.call(r,o)}catch(r){a=[6,r];n=0}finally{t=s=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}}import i from"localforage";var l={get:function r(r){return n(function(){var e;return c(this,function(t){switch(t.label){case 0:t.trys.push([0,2,,3]);return[4,i.getItem(r)];case 1:return[2,t.sent()];case 2:e=t.sent();return[2,(console.error('Error getting key "'.concat(r,'":'),e),null)];case 3:return[2]}})})()},set:function r(r,e){return n(function(){var t;return c(this,function(n){switch(n.label){case 0:n.trys.push([0,2,,3]);return[4,i.setItem(r,e)];case 1:n.sent();return[3,3];case 2:t=n.sent();console.error('Error setting key "'.concat(r,'":'),t);return[3,3];case 3:return[2]}})})()},remove:function r(r){return n(function(){var e;return c(this,function(t){switch(t.label){case 0:t.trys.push([0,2,,3]);return[4,i.removeItem(r)];case 1:t.sent();return[3,3];case 2:e=t.sent();console.error('Error removing key "'.concat(r,'":'),e);return[3,3];case 3:return[2]}})})()},clear:function r(){return n(function(){var r;return c(this,function(e){switch(e.label){case 0:e.trys.push([0,2,,3]);return[4,i.clear()];case 1:e.sent();return[3,3];case 2:r=e.sent();console.error("Error clearing storage:",r);return[3,3];case 3:return[2]}})})()},key:function r(r){return n(function(){var e;return c(this,function(t){switch(t.label){case 0:t.trys.push([0,2,,3]);return[4,i.key(r)];case 1:return[2,t.sent()];case 2:e=t.sent();return[2,(console.error("Error getting key at index ".concat(r,":"),e),null)];case 3:return[2]}})})()},keys:function r(){return n(function(){var r;return c(this,function(e){switch(e.label){case 0:e.trys.push([0,2,,3]);return[4,i.keys()];case 1:return[2,e.sent()];case 2:r=e.sent();return[2,(console.error("Error getting keys:",r),[])];case 3:return[2]}})})()},length:function r(){return n(function(){var r;return c(this,function(e){switch(e.label){case 0:e.trys.push([0,2,,3]);return[4,i.length()];case 1:return[2,e.sent()];case 2:r=e.sent();return[2,(console.error("Error getting storage length:",r),0)];case 3:return[2]}})})()},iterate:function r(r){return n(function(){var e;return c(this,function(t){switch(t.label){case 0:t.trys.push([0,2,,3]);return[4,i.iterate(r)];case 1:t.sent();return[3,3];case 2:e=t.sent();console.error("Error iterating storage:",e);return[3,3];case 3:return[2]}})})()}};var f=function(r){return"error_list:".concat(r)},h=24*60*60*1e3;function y(r){return p.apply(this,arguments)}function p(){p=n(function(r){var e,t,n;return c(this,function(s){switch(s.label){case 0:if(!r.length)return[2];e=Date.now(),t=f(e);s.label=1;case 1:s.trys.push([1,3,,4]);return[4,l.set(t,{errors:r,timestamp:e})];case 2:s.sent(),console.log("✅ Saved ".concat(r.length," errors to storage with key: ").concat(t));return[3,4];case 3:n=s.sent();console.error("❌ Failed to save errors: ".concat(n.message));return[3,4];case 4:return[2]}})});return p.apply(this,arguments)}function b(){return g.apply(this,arguments)}function g(){g=n(function(){var r,e,t,n,s,a,u,i,f,h,y,p;return c(this,function(c){switch(c.label){case 0:c.trys.push([0,10,,11]);return[4,l.keys()];case 1:r=c.sent().filter(function(r){return r.startsWith("error_list:")}),e=[];t=true,n=false,s=undefined;c.label=2;case 2:c.trys.push([2,7,8,9]);a=r[Symbol.iterator]();c.label=3;case 3:if(!!(t=(u=a.next()).done))return[3,6];i=u.value;return[4,l.get(i)];case 4:h=c.sent();h&&(f=e).push.apply(f,o(h.errors));c.label=5;case 5:t=true;return[3,3];case 6:return[3,9];case 7:y=c.sent();n=true;s=y;return[3,9];case 8:try{if(!t&&a.return!=null){a.return()}}finally{if(n){throw s}}return[7];case 9:return[2,e];case 10:p=c.sent();return[2,(console.error("❌ Failed to retrieve stored errors: ".concat(p.message)),[])];case 11:return[2]}})});return g.apply(this,arguments)}function v(){return m.apply(this,arguments)}function m(){m=n(function(){var r,e,t,n,s,a,o,u,i,f,y,p;return c(this,function(c){switch(c.label){case 0:c.trys.push([0,12,,13]);return[4,l.keys()];case 1:r=c.sent(),e=Date.now();t=true,n=false,s=undefined;c.label=2;case 2:c.trys.push([2,9,10,11]);a=r[Symbol.iterator]();c.label=3;case 3:if(!!(t=(o=a.next()).done))return[3,8];u=o.value;if(!u.startsWith("error_list:"))return[3,7];return[4,l.get(u)];case 4:i=c.sent();f=i&&e-i.timestamp>h;if(!f)return[3,6];return[4,l.remove(u)];case 5:f=(c.sent(),console.log("\uD83D\uDDD1️ Removed expired error list: ".concat(u)));c.label=6;case 6:f;c.label=7;case 7:t=true;return[3,3];case 8:return[3,11];case 9:y=c.sent();n=true;s=y;return[3,11];case 10:try{if(!t&&a.return!=null){a.return()}}finally{if(n){throw s}}return[7];case 11:return[3,13];case 12:p=c.sent();console.error("❌ Failed to clear expired error lists: ".concat(p.message));return[3,13];case 13:return[2]}})});return m.apply(this,arguments)}export{v as clearExpiredErrorLists,b as getStoredErrorLists,y as saveErrorListToStorage};