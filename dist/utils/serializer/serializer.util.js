function e(e,r){if(r!=null&&typeof Symbol!=="undefined"&&r[Symbol.hasInstance]){return!!r[Symbol.hasInstance](e)}else{return e instanceof r}}function r(e){"@swc/helpers - typeof";return e&&typeof Symbol!=="undefined"&&e.constructor===Symbol?"symbol":typeof e}var i=Object.defineProperty;var n=function(e,r){return i(e,"name",{value:r,configurable:!0})};import{Buffer as t}from"node:buffer";var u={Date:{is:n(function(r){return e(r,Date)},"is"),serialize:n(function(e){return{__type:"Date",value:e.toISOString()}},"serialize"),deserialize:n(function(e){return new Date(e)},"deserialize")},Map:{is:n(function(r){return e(r,Map)},"is"),serialize:n(function(e){return{__type:"Map",value:Array.from(e.entries())}},"serialize"),deserialize:n(function(e){return new Map(e)},"deserialize")},Set:{is:n(function(r){return e(r,Set)},"is"),serialize:n(function(e){return{__type:"Set",value:Array.from(e)}},"serialize"),deserialize:n(function(e){return new Set(e)},"deserialize")},RegExp:{is:n(function(r){return e(r,RegExp)},"is"),serialize:n(function(e){return{__type:"RegExp",value:{source:e.source,flags:e.flags}}},"serialize"),deserialize:n(function(e){var r=e.source,i=e.flags;return new RegExp(r,i)},"deserialize")},BigInt:{is:n(function(e){return(typeof e==="undefined"?"undefined":r(e))=="bigint"},"is"),serialize:n(function(e){return{__type:"BigInt",value:e.toString()}},"serialize"),deserialize:n(function(e){return BigInt(e)},"deserialize")},Buffer:{is:n(function(e){return t.isBuffer(e)},"is"),serialize:n(function(e){return{__type:"Buffer",value:e.toString("base64")}},"serialize"),deserialize:n(function(e){return t.from(e,"base64")},"deserialize")}},a={serialize:function e(e){return JSON.stringify(e,function(e,r){var i=true,n=false,t=undefined;try{for(var a=Object.keys(u)[Symbol.iterator](),f;!(i=(f=a.next()).done);i=true){var s=f.value;var o=u[s];if(o.is(r))return o.serialize(r)}}catch(e){n=true;t=e}finally{try{if(!i&&a.return!=null){a.return()}}finally{if(n){throw t}}}return r})},deserialize:function e(e){return JSON.parse(e,function(e,i){if(i&&(typeof i==="undefined"?"undefined":r(i))=="object"&&"__type"in i&&typeof i.__type=="string"){var n=i.__type,t=u[n];if(t)return t.deserialize(i.value)}return i})}};export{a as serializer};