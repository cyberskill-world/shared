"use strict";function e(e,r,t){if(r in e){Object.defineProperty(e,r,{value:t,enumerable:true,configurable:true,writable:true})}else{e[r]=t}return e}function r(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};var o=Object.keys(n);if(typeof Object.getOwnPropertySymbols==="function"){o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))}o.forEach(function(t){e(r,t,n[t])})}return r}function t(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);if(r){n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})}t.push.apply(t,n)}return t}function n(e,r){r=r!=null?r:{};if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(r))}else{t(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(e,r){if(e==null)return{};var t=u(e,r);var n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++){n=a[o];if(r.indexOf(n)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,n))continue;t[n]=e[n]}}return t}function u(e,r){if(e==null)return{};var t={};var n=Object.keys(e);var o,u;for(u=0;u<n.length;u++){o=n[u];if(r.indexOf(o)>=0)continue;t[o]=e[o]}return t}function a(e){"@swc/helpers - typeof";return e&&typeof Symbol!=="undefined"&&e.constructor===Symbol?"symbol":typeof e}var i=Object.create;var l=Object.defineProperty;var c=Object.getOwnPropertyDescriptor;var f=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty;var s=function(e,r){for(var t in r)l(e,t,{get:r[t],enumerable:!0})},v=function(e,r,t,n){var o=true,u=false,i=undefined;if(r&&(typeof r==="undefined"?"undefined":a(r))=="object"||typeof r=="function")try{var g=function(){var o=v.value;!d.call(e,o)&&o!==t&&l(e,o,{get:function(){return r[o]},enumerable:!(n=c(r,o))||n.enumerable})};for(var s=f(r)[Symbol.iterator](),v;!(o=(v=s.next()).done);o=true)g()}catch(e){u=true;i=e}finally{try{if(!o&&s.return!=null){s.return()}}finally{if(u){throw i}}}return e};var y=function(e,r,t){return t=e!=null?i(g(e)):{},v(r||!e||!e.__esModule?l(t,"default",{value:e,enumerable:!0}):t,e)},p=function(e){return v(l({},"__esModule",{value:!0}),e)};var m={};s(m,{aggregatePaginate:function(){return O.default},generateModel:function(){return x},generateSchema:function(){return E},generateShortId:function(){return _},generateSlug:function(){return I},generateSlugQuery:function(){return k},getMongoGenericFields:function(){return A},mongoosePaginate:function(){return h.default}});module.exports=p(m);var b=y(require("crypto-js"),1),O=y(require("mongoose-aggregate-paginate-v2"),1),h=y(require("mongoose-paginate-v2"),1),S=y(require("slugify"),1),j=require("uuid");var w=require("date-fns");function P(){return(0,w.format)(new Date,"yyyy-MM-dd HH:mm:ss.SSS")}function M(e,r){r.filter(function(e){return typeof e=="function"}).forEach(function(r){return e.plugin(r)})}function q(e,r){r.forEach(function(r){var t=r.method,n=r.fn;return e.pre(t,n)})}function D(e){return new e.Schema({id:{type:String,default:j.v4,required:!0,unique:!0},isDel:{type:Boolean,default:!1,required:!0}},{timestamps:!0})}function E(e){var r=e.mongoose,t=e.schema,n=e.virtuals,o=n===void 0?[]:n,u=e.standalone,a=u===void 0?!1:u;var i=new r.Schema(t,{strict:!0});return o.forEach(function(e){var r=e.name,t=e.options,n=e.get;var o=i.virtual(r,t);n&&o.get(n)}),a||i.add(D(r)),i}function x(e){var r=e.mongoose,t=e.name,n=e.schema,o=e.pagination,u=o===void 0?!1:o,a=e.aggregate,i=a===void 0?!1:a,l=e.virtuals,c=l===void 0?[]:l,f=e.middlewares,g=f===void 0?[]:f;if(!t)throw new Error("Model name is required.");if(r.models[t])return r.models[t];var d=E({mongoose:r,schema:n,virtuals:c});return M(d,[u&&h.default,i&&O.default]),q(d,g),r.model(t,d)}var H=S.default.default||S.default;function I(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;var n=t||{},u=n.lower,a=u===void 0?!0:u,i=n.locale,l=i===void 0?"vi":i,c=o(n,["lower","locale"]);return H(e,r({lower:a,locale:l},c))}function _(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:4;return b.default.SHA256(e).toString(b.default.enc.Hex).slice(0,r)}function k(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;return n(r({},t,o&&{id:{$ne:o}}),{$or:[{slug:e},{slugHistory:e}]})}function A(){return{id:(0,j.v4)(),isDel:!1,createdAt:P(),updatedAt:P()}}0&&(module.exports={aggregatePaginate:aggregatePaginate,generateModel:generateModel,generateSchema:generateSchema,generateShortId:generateShortId,generateSlug:generateSlug,generateSlugQuery:generateSlugQuery,getMongoGenericFields:getMongoGenericFields,mongoosePaginate:mongoosePaginate});